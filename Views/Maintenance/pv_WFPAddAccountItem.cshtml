<script>
    function getParamCancel() {
        return {
            office: $("#office").val(),
            account: $("#account").val(),
            year: $("#wfpyear").val()
        }
    }
    function returnwfpitem(id, officeid, accountid, yearof, isPPMP) {
        var year= $("#wfpyear").val()
        var fundid = $("#gfid").val() == 1 ? 0 : 1;
        var mode_trans= $("#gf_currentid").val()
        swal({
            title: "Return the ITEM?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "Yes",
            closeOnConfirm: false,
            showLoaderOnConfirm: true
        },
            function () {
                var url = "@Url.Action("returnwfpitem", "Report")";
                $.get(url, { id: id, officeid: officeid, accountid: accountid, yearof: yearof, isPPMP: isPPMP }, function (e) {
                    if (e =='success'){
                        swal("Success", "The item has been successfully returned..", "success")
                        $("#WFPCancel").data("kendoGrid").dataSource.read()
                    }
                    else{
                        swal("Error",e,"error")
                    }
                })
            })
    }
</script>
<div style="width:100%;float:left;margin-top:1px;">
    @(Html.Kendo().Grid<iFMIS_BMS.BusinessLayer.Models.WFPrepare>()
        .Name("WFPCancel")
        .HtmlAttributes(new { style = "" })
        .Scrollable()
        .Columns(col =>
        {
        col.Template(@<text></text>)
            .Hidden()
            .ClientTemplate("<div>#=wfpid# </div>");
    col.Template(@<text></text>)
            .Hidden()
            .ClientTemplate("<div>#=officeid# </div>");
    col.Template(@<text></text>)
            .Hidden()
            .ClientTemplate("<div>#=accountid# </div>");
    col.Template(@<text></text>)
            .Hidden()
            .ClientTemplate("<div>#=yearof# </div>");
    col.Template(@<text></text>)
            .Hidden()
            .ClientTemplate("<div>#=isPPMP# </div>");
    col.Template(@<text></text>)
            .HeaderTemplate(@<text>Specific Activity</text>)
            .Width(300)
            .HtmlAttributes(new { style = "text-align:left;vertical-align:top" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=specificactivity# </div>");
    col.Template(@<text></text>)
            .HeaderTemplate(@<text>Item</text>)
            .Width(200)
            .HtmlAttributes(new { style = "text-align:left;font-size:12px;vertical-align:top" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=particular# </div>");
    col.Template(@<text></text>)
            .HeaderTemplate(@<text>Amount</text>)
            .Width(100)
            .HtmlAttributes(new { style = "text-align:right;font-size:12px;vertical-align:top" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=kendo.toString(amount,'c2')# </div>");
    col.Template(@<text></text>)
            .HeaderTemplate(@<text></text>)
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:10px;color:beige;" })
            .ClientTemplate(
                "<div id='deleteid#=wfpid#' style='border-radius:50px;' onclick='returnwfpitem(#=wfpid#,#=officeid#,#=accountid#,#=yearof#,#=isPPMP#)'><span class='fa fa-arrow-left' title='Click to return the item to the preparation.' style='font-size: 16px;margin: 1px;margin-top: -1px;margin-left: 2px;margin-right: 2px;color:cornflowerblue;cursor:pointer'> </span></div> ")
            .HtmlAttributes(new { style = "vertical-align: top;text-align:center" })
            .Width(30);
        })
        .Resizable(e => e.Columns(true))
        .Pageable(pageable => pageable
        .Refresh(true)
        .ButtonCount(5))
        .HtmlAttributes(new { @class = "table-responsive", style = "height:410px;" })
        .Selectable()
        //.Events(e => e.DataBound("onDataBound").Change("WFPgrid"))
        .DataSource(dataSource => dataSource
        .Ajax()
        .Batch(true)
        .Model(m => m.Id(i => i.wfpid))
        .ServerOperation(false)
        //.Aggregates(a =>
        //{
        //    a.Add(c => c.totalamount).Sum();
        //})
        .PageSize(1000)
        .Read(read => read.Action("GetWFPCancel", "Report").Data("getParamCancel"))
        )
    )
</div>