
<script>

    function searchOBRNoURL() {
        return '@Url.Action("searchOBR", "Maintenance")';
    }

</script>
<style>
    textarea {
        resize: none;
    }

        textarea:focus, input:focus, input[type]:focus, .uneditable-input:focus {
            border-color: rgba(0, 128, 0, 0.8);
            box-shadow: 0 1px 1px rgba(0, 128, 0, 0.075) inset, 0 0 8px rgba(0, 128, 0, 0.6);
            outline: 0 none;
        }
</style>

<h2>Transfer Transaction Charge  - Current</h2>
<div style="width : 100%; margin-top: 20px;border-style: solid; border-color: #1fa67a">

    <div style="width:100%;height : 35px ; background-color:#1fa67a; color: white">
        <h2 style="margin-left: 5px;color:white"><i class="fa fa-exchange"></i> List of Edited Transactions</h2>
    </div>
    <div style="padding:5px;">
        <div style="margin-top:20px;"></div>
        <script>

            $('title').html('IFMIS-BMS (Transfer Transaction Charge - Current)');
            var thisculture = kendo.culture();
            thisculture.numberFormat.currency.symbol = '₱';

            function searchOBR() {

                var SearchOBRData = $("#SearchData").val();
                $("#grOBR").data("kendoGrid").dataSource.filter([
                    {
                        field: "OBRNo",
                        operator: "contains",
                        value: SearchOBRData
                    }
                ]);
            }

            $(function () {
                $("#SearchData").keypress(function (e) {
                    if (e.keyCode == 13) {
                        searchOBR();
                    }
                });
            });

            function AddNewTransaction() {

                $(window).scrollTop(0);

                var url = "@Url.Action("TransferTransactionCharge", "Maintenance")";
                $.get(url, function (d) {
                    //document.documentElement.style.overflow = 'hidden';  // firefox, chrome
                    //document.body.scroll = "no";
                    $('#AddNewTransaction').html(d);
                });
                $('#AddNewTransaction').data('kendoWindow').title("<i class='fa fa-navicon'> </i> Transfer Transaction Charge - Current").center().open();
            }

            function ChangeTransactionYear()
            {
                $("#grTransaction").data("kendoGrid").dataSource.read();
            }

            function YearParam()
            {
                var Year = $("#Years").val();
                //console.log(Year);
                return {
                    Year: Year
                }
            }
        </script>

        @(Html.Kendo().Grid<iFMIS_BMS.BusinessLayer.Models.BudgetControlModel>()
    .HtmlAttributes(new { style = "height:540px" })
    .Name("grTransaction")
    .Scrollable()
    .Columns(col =>
    {
        col.Bound(m => m.OBRNo).Title("OBR No.").Width(160).Locked(true).Lockable(false);
        col.Template(t => { }).Title("Amount").Width(100).ClientTemplate("<div> #=kendo.toString(Amount, 'c2')# </div>");
        col.Bound(m => m.OfficeName).Title("Office").Width(300);
        col.Bound(m => m.DateTimeEntered).Title("Date Edited").Width(120);
        col.Bound(m => m.DateTimeEntered).Title("Edited By").Width(250);
    })
    .ToolBar(t => t.Template(@<text>


        <div style="float: left; width: 0; margin-top:-3px;margin-bottom:-100px;margin-left:-3px; height: 0; border-right: 0px solid #333333; border-bottom: 37px solid #333333; border-left: 65px solid #333333;">
            <div style="float: left; width: 0; margin-top:0px;margin-bottom:-97px;margin-left:-33px; height: 0; border-left: 35px solid #333333; border-bottom: 37px solid #EEE; ">

                <div style="float: left; height:28px; margin-left:-59px; margin-top: 5px;">
                    <i class="fa fa-tasks fa-2x fg-white"></i>

                </div>

            </div>
        </div>
        <div style="float: right; height:28px;margin-top:2px;">
            <link href="~/Content/metroui/css/docs.css" rel="stylesheet" />
            <div class="k-button" style="margin-right:10px;float:left" onclick="AddNewTransaction()"><span class="fa fa-exchange"></span> Transfer Account Charge</div>
            <div style="float: left;">
                @(Html.Kendo().DropDownList()
                        .Name("Years")
                        .DataTextField("YearOf")
                        .DataValueField("YearOf")
                        .OptionLabel("Year")
                        .SelectedIndex(1)
                        .Events(e => e.Change("ChangeTransactionYear"))
                        .HtmlAttributes(new { @style = "width: 80px;text-align:left;margin-right:5px;" })
                        .DataSource(source => source.Read(read => read.Action("Years", "Dropdowns")))

                )
            </div>

            <div style="background-color:white;border:solid;border-color:whitesmoke;border-width:thin;width:230px;height:33px;float:right;padding:0px;margin-top:-3px;" id="search">
                <input type="text" style="width:180px;border-collapse:collapse;border-color:white;margin:0px;margin-left:0px;height:70%;outline:none;border-left-style:none;font-family:'Segoe UI Light_','Open Sans Light',Verdana,Arial,Helvetica,sans-serif;float:left;" placeholder="Search by OBR Data" id="SearchData" name="SearchData">
                <div class="k-button k-button-icontext" style="height:33px;width:40px;" onclick="searchOBR()"><span class="mif-search"></span></div>
            </div>
        </div>
    </text>))

        .Pageable(page => page.Refresh(true)
        .Enabled(true)
        .ButtonCount(4)
        .PreviousNext(true)
        )
            .Selectable(selectable => selectable.Mode(GridSelectionMode.Single))
            .AutoBind(false)
            .DataSource(d => d
            .Ajax()
            .PageSize(10)
            .Model(m => m.Id(i => i.OBRNo))
            .Read(read => read.Action("grTransferTransactionCharge", "Maintenance").Data("YearParam"))
            )
        )
    </div>


</div>

@(Html.Kendo().Window()
    .Name("AddNewTransaction")
    .Title("Transfer Transaction Charge")
    .Width(1060)
    .Height(540)
    .Visible(false)
    .Modal(true)
    .Draggable(true)
    .AutoFocus(true)
    .Events(e => e.Close("onClose"))
    .Animation(a =>
        {
            a.Open(o => o.Fade(FadeDirection.In));
            a.Close(c =>
            {
                c.Fade(FadeDirection.In);
                c.Reverse(true);
            });
        }).Actions(a => { a.Close(); }))

<script src="~/Scripts/BMS/Maintenance/ChangeAcctCharage.js"></script>