<script>
    function change_text() {
        var ooe_ids = $('#float_ooe_id_null').val()
        $("#float_account_list_null").data("kendoComboBox").dataSource.read();
        if (ooe_ids == 1) {

            document.getElementById("float_PS_nulls").disabled = false;
            document.getElementById("float_MOOE_nulls").disabled = true;
            document.getElementById("float_CO_nulls").disabled = true;

        }
        else if (ooe_ids == 2) {
            document.getElementById("float_PS_nulls").disabled = true;
            document.getElementById("float_MOOE_nulls").disabled = false;
            document.getElementById("float_CO_nulls").disabled = true;
        }
        else if (ooe_ids == 3) {
            document.getElementById("float_PS_nulls").disabled = true;
            document.getElementById("float_MOOE_nulls").disabled = true;
            document.getElementById("float_CO_nulls").disabled = false;
        }
        else {
            document.getElementById("float_PS_nulls").disabled = true;
            document.getElementById("float_MOOE_nulls").disabled = true;
            document.getElementById("float_CO_nulls").disabled = true;
        }
    }
    @*function fn_reqSave_Float() {

        var url = "@Url.Action("Save_Flaot", "Release")";




        var office_id = $("#float_offs_null").val();
        var program_id = $("#float_Progss_null").val();
        var ooe_id = $("#float_ooe_id_null").val();
        var account_id = $("#float_account_list_null").val();
        var month_ = $("#float_Months_null").val();
        var numeric_ = $("#float_numeric_null").val();
        var year_ = $("#float_ddlYear_null").val();

        var ps_ = $("#float_PS_nulls").val();
        var mooe_ = $("#float_MOOE_nulls").val();
        var co_ = $("#float_CO_nulls").val();

        var _PS = $("#balance_amount_ps").val();
        var _MOOE = $("#balance_amount_mooe").val();
        var _CO = $("#balance_amount_co").val();

        var float_id = $("#float_id").val();

        var balance_ps = _PS - ps_;
        var balance_mooe = _MOOE - mooe_;
        var balance_co = _CO - co_;

        if (ps_ == '' || ps_ == "" || ps_ == null || (ooe_id == 2 && ooe_id == 3)) { ps_ = 0; }
         if (mooe_ == '' || mooe_ == "" || mooe_ == null || (ooe_id == 1 && ooe_id == 3)) { mooe_ = 0; }
         if (co_ == '' || co_ == "" || co_ == null || (ooe_id == 2 && ooe_id == 1)) { co_ = 0; }


         if (balance_ps < 0 || balance_mooe < 0 || balance_co < 0)
         {
             swal({
                 title: "Error!",
                 text: "System Error! Please Check Balance Amount.",
                 timer: 2000,
                 type: "error",
                 showConfirmButton: false
             })
         }
         else {
             swal({
                 title: "Are you sure?",
                 text: "This Float will be SAVED!",
                 type: "warning",
                 showCancelButton: true,
                 confirmButtonColor: "#1fa67a",
                 confirmButtonText: "Yes, Save It!",
                 closeOnConfirm: false
             }, function () {
                 //  $.post(url, { office_id: office_id, program_id: program_id, ooe_id: ooe_id, account_id: account_id, month_: month_, numeric_: numeric_, year_: year_, ps_: ps_ , mooe_: mooe_, co_: co_, balance_ps: balance_ps, balance_mooe: balance_mooe, balance_co: balance_co }, function (e) {
                 $.post(url, {
                     office_id: office_id,
                     program_id: program_id,
                     ooe_id: ooe_id,
                     account_id: account_id,
                     month_: month_,
                     numeric_: numeric_,
                     year_: year_,

                     ps_: ps_,
                     mooe_: mooe_,
                     co_: co_,

                     balance_ps: balance_ps,
                     balance_mooe: balance_mooe,
                     balance_co: balance_co,

                     float_id: float_id

                 }, function (e) {
                     $("#float_PS_nulls").val('');
                     $("#float_MOOE_nulls").val('');
                     $("#float_CO_nulls").val('');
                     get_Balance();
                     if (e == "1") {
                         swal({
                             title: "Success!",
                             text: "Float has been Added.",
                             timer: 2000,
                             type: "success",
                             showConfirmButton: false
                         })
                         $("#grd_Float").data("kendoGrid").dataSource.read();
                         $('#GeneralFund_Grid').data('kendoGrid').dataSource.read();
                     } else {
                         swal({
                             title: "Error!",
                             text: "System Error! Please try again.",
                             timer: 2000,
                             type: "error",
                             showConfirmButton: false
                         })
                     }
                 });
             });
         }


    }*@








    function addFloat() {
        var url = "@Url.Action("releasefloat", "Release")";
        var idsToSend = [];
        var grid = $("#grd_Float").data("kendoGrid")
        var ds = grid.dataSource.view();
        var officeid = $("#offs").val() == "" ? 0 : $("#offs").val();
        var accountid = $("#account_list").val() == "" ? 0 : $("#account_list").val();
        var yearof=$("#ddlYear").val();

        if ($("#offs").val() == "") {
            swal({
                    title: "",
                    text: "This will release all floats. Do you want to proceed?",
                    type: "info",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#1fa67a",
                    confirmButtonText: "Yes",
                    showLoaderOnConfirm: true,
            }, function () {
                $.post(url, { officeid: officeid, accountid: accountid, yearof: yearof }, function (d) {
                        if (d == "success") {
                            swal({ title: "Success!", text: "All floats successfully released!", timer: 2500, showConfirmButton: false, type: "success" });
                            $("#grd_Float").data("kendoGrid").dataSource.read();
                        }
                        else {
                            swal("Something Went Wrong!", d, "error");
                        }
                    });
                });
        }
        else if ($("#offs").val() != "" && $("#account_list").val() == "") {
            swal({
                title: "",
                text: "This will release all floats for this particular office. Do you want to proceed?",
                type: "info",
                showCancelButton: true,
                closeOnConfirm: false,
                confirmButtonColor: "#1fa67a",
                confirmButtonText: "Yes",
                showLoaderOnConfirm: true,
            }, function () {
                $.post(url, { officeid: officeid, accountid: accountid, yearof: yearof }, function (d) {
                    if (d == "success") {
                        swal({ title: "Success!", text: "All floats successfully released for this office!", timer: 2500, showConfirmButton: false, type: "success" });
                        $("#grd_Float").data("kendoGrid").dataSource.read();
                    }
                    else {
                        swal("Something Went Wrong!", d, "error");
                    }
                });
            });
        }
        else if ($("#offs").val() != "" && $("#account_list").val() != "") {
            var url2 = "@Url.Action("releasefloatselected", "Release")";
            for (var i = 0; i < ds.length; i++) {
                var row = grid.table.find("tr[data-uid='" + ds[i].uid + "']");
                var checkbox = $(row).find(".checkbox");
                if (checkbox.is(":checked")) {
                    idsToSend.push(ds[i].release_float_id);
                }
            }
                //alert(idsToSend)
                if (idsToSend == "") {
                    //swal({ title: "Error!", text: "Please mark the accounts first", timer: 2500, showConfirmButton: false, type: "error" });

                    swal({
                        title: "Warning",
                        text: "Please ckeck the account first or this will release all floats for this particular office. Do you want to proceed?",
                        type: "warning",
                        showCancelButton: true,
                        closeOnConfirm: false,
                        confirmButtonColor: "#1fa67a",
                        confirmButtonText: "Yes",
                        showLoaderOnConfirm: true,
                    }, function () {
                        $.post(url, { officeid: officeid, accountid: 0, yearof: yearof }, function (d) {
                            if (d == "success") {
                                swal({ title: "Success!", text: "All floats successfully released for this office!", timer: 2500, showConfirmButton: false, type: "success" });
                                $("#grd_Float").data("kendoGrid").dataSource.read();
                            }
                            else {
                                swal("Something Went Wrong!", d, "error");
                            }
                        });
                    });

                } else {
                    swal({
                        title: "Are you sure?",
                        text: "You want to Release this Float?",
                        type: "info",
                        showCancelButton: true,
                        closeOnConfirm: false,
                        confirmButtonColor: "#1fa67a",
                        confirmButtonText: "Yes!",
                        showLoaderOnConfirm: true,
                    }, function () {

                        $.post(url2, { release_float_id: idsToSend }, function (d) {
                            if (d == 'success') {
                                swal({ title: "Success!", text: "Selected float has been released or approved!", timer: 2500, showConfirmButton: false, type: "success" });
                                $("#grd_Float").data("kendoGrid").dataSource.read();
                                $('#GeneralFund_Grid').data('kendoGrid').dataSource.read();
                            }
                            else {
                                swal("Something Went Wrong!", d, "error");
                            }
                        });
                    });
                }
            //}
        }
      
    }
    function fn_refresher_float_null() {

        //$("#float_offs_null").val(null);
        //// $("#float_account_list_null").val(null);
        //$("#float_ooe_id_null").val(null);

        //$("#float_offs_null").data("kendoComboBox").text(null);
        //$("#float_account_list_null").data("kendoComboBox").text(null);
        //$("#float_ooe_id_null").data("kendoDropDownList").text(null);

        //$("#float_Progss_null").data("kendoDropDownList").dataSource.read();
        //$("#float_ooe_id_null").data("kendoDropDownList").dataSource.read();
        //$("#float_account_list_null").data("kendoComboBox").dataSource.read();
        //$("#grd_Float").data("kendoGrid").refresh();
        //$("#grd_Float").data("kendoGrid").dataSource.read();
        $("#FloatWindow").data("kendoWindow").close();
        $("#GeneralFund_Grid").data("kendoGrid").dataSource.read();

    }
    setTimeout(function () {

        FundGrid_Load();

    }, 1000);

    function fn_grid_refresh_div_null() {

        setTimeout(function () {
            get_Balance();
            FundGrid_Load();
            fn_Offices();
            $("#grd_Float").data("kendoGrid").refresh();
            $("#grd_Float").data("kendoGrid").dataSource.read();
        }, 500);
    }
    @*function get_Balance() {
            var url = "@Url.Action("get_balance", "Release")"

            var office_id = $("#float_offs_null").val();
            var program_id = $("#float_Progss_null").val();
            var ooe_id = $("#float_ooe_id_null").val();
            var account_id = $("#float_account_list_null").val();
            var month_ = $("#float_Months_null").val();
            var numeric_ = $("#float_numeric_null").val();
            var year_ = $("#float_ddlYear_null").val();


            $.get(url, { office_id: office_id, program_id: program_id, ooe_id: ooe_id, account_id: account_id, month_: month_, numeric_: numeric_, year_: year_ }, function (d) {
                document.getElementById("balance_amount_ps").value = d.balance_amount_ps;
                document.getElementById("balance_amount_mooe").value = d.balance_amount_mooe;
                document.getElementById("balance_amount_co").value = d.balance_amount_co;
                document.getElementById("available_amount").value = d.available_amount;

                //alert(d.balance_amount)
            })
        }*@



    setTimeout(function () {
        var url = "@Url.Action("FundGrid_Load", "Release")";


        $.get(url, { }, function (d) {

                $("#FundGrid_id_null").html(d);

        })

    }, 1000);


        function FundGrid_Load() {

        var url = "@Url.Action("FundGrid_Load", "Release")";
        var office_id = $("#float_offs_null").val();
        var program_id = $("#float_Progss_null").val();
        var ooe_id = $("#float_ooe_id_null").val();
        var account_id = $("#float_account_list_null").val();
        var month_ = $("#float_Months_null").val();
        var numeric_ = $("#float_numeric_null").val();
        var year_ = $("#float_ddlYear_null").val();
        var classtype = $("#classtype").val();


        $.get(url, { office_id: office_id, program_id: program_id, ooe_id: ooe_id, account_id: account_id, month_: month_, numeric_: numeric_, year_: year_ }, function (d) {
            $("#FundGrid_id_null").html(d);
        })

    }
    function fn_dprefresher_fund_null() {


        setTimeout(function () {
            $("#float_Progss_null").data("kendoDropDownList").dataSource.read();
            $("#float_ooe_id_null").data("kendoDropDownList").dataSource.read();
            $("#float_account_list_null").data("kendoComboBox").dataSource.read();

        }, 1000);

    }

</script>



<div style="border: outset;clear:both;border-width:1px;border-color:#1fa67a; width: 819px; padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:7px;margin-top: 0px;">
    <div style=" width: 0;height: 0; border-right: 5px solid #333333; border-bottom: 37px solid #333333; border-left: 65px solid #333333;margin-top: -1px; ">
        <div style="float: left; width: 752px; margin-top:1px;margin-bottom:-97px;margin-left:-33px; height: 0; border-left: 35px solid #333333; border-bottom: 36px solid #1fa67a; ">
            <div style="float: left; height:28px; margin-left:-59px; margin-top: 5px;">
                <i class="fa fa-tasks fa-2x fg-white"></i>

            </div>

            @*<div style="text-align: right;float: right;margin-right:10px;margin-top:2px;">


                @(Html.Kendo().DropDownList()
                        .Name("float_ddlYear_null")
                        .DataTextField("ProposalYear")
                        .DataValueField("ProposalYear")
                        .SelectedIndex(0)
                        .HtmlAttributes(new { @style = "width: 70px;" })
                        .Events(e => e.Change("fn_grid_refresh_div_null"))
                        .DataSource(source => source.Read(read => read.Action("GetPropYear2", "PYear")))
                )




            </div>
            <div style="float: right;margin-right:10px;margin-top:2px;">
                <i class="fa fa-calendar fa-2x #33333"></i>
            </div>*@


        </div>
    </div>
    <div style="width:550px"> <label style="width:80px;display:inline-block;">&nbsp; Legend : </label> 
        
        <label style="display:inline-block;margin-left:2px;">Governor's Commitment &nbsp;</label>
        <div style="background-color:yellow;border-style:solid;width:20px;height:20px;display:inline-block;margin-top:2px"></div>
        <label style="display:inline-block;margin-left:2px;"> For Approval</label>
        <div style="background-color:#00ff21;border-style:solid;width:20px;height:20px;display:inline-block;margin-top:2px"></div>
        <label style="display:inline-block;margin-left:2px;"> Approved</label>
    </div>
    <div class="demo-section k-content" style=" float:right;margin-top: 7px;margin-right:7px ">

    </div>
    <div id="FundGrid_id_null" class="demo-section k-content">


    </div>
  
</div>





<div style="float: none;clear:both;margin-top:-5px;">
    <div style="float:left;margin-top:26px;margin-left:524px">
        <div class="k-button k-button-icontext" style=" bottom: 15px; right: 220px;width: 90px; border-radius:50px;color:#ffffff;background-color:#1FA67A;" onclick="addFloat()"><span class='fa fa-plus-circle' style='font-size: 10pt;margin: 1px;margin-top: -1px;margin-left: 5px;margin-right: 3px;'></span> Release</div>
    </div>
    <div style="float:left;margin-top:-29px;margin-left:625px">
        <div class="k-button k-button-icontext" style=" bottom: 15px; right: 220px;width: 80px; border-radius:50px;color:#ffffff;background-color:#DE5555;" onclick="fn_refresher_float_null()"><span class='fa fa-times' style='font-size: 10pt;margin: 1px;margin-top: -1px;margin-left: 5px;margin-right: 3px;'></span> Close</div>
    </div>
    @*<div class="k-button k-button-icontext" style="position: absolute; bottom: 15px; right: 120px;width: 80px;" onclick="addFloat()">Release</div>
    <div class="k-button k-button-icontext" style="position: absolute; bottom: 15px; right: 20px;width: 80px;" onclick="fn_refresher_float_null()">Close</div>*@
</div>


