@model IEnumerable<iFMIS_BMS.BusinessLayer.Models.WFP>
<script>
    var thisculture = kendo.culture();
    thisculture.numberFormat.currency.symbol = '';

    function CheckAll(e) {
        $("#WFPApprovedGrid tbody input:checkbox").prop("checked", e.checked);
    }

    function fnoffice() {
        return{
            officeid : $("#office").val(),
            fundid : $("#gfid").val() == 1 ? 0 : 1
        }
    }
    function fnooe() {
        return {
            officeid:$("#office").val(),
            tyear: $("#wfpyear").val()
        }
    }
    function fnprogram() {
        return {
            selname:$("#ooe").data("kendoComboBox").text()
        }
    }
    function fnOffice_sel() {
        //$("#ooe").data("kendoComboBox").value("")
        //$("#ooe").data("kendoComboBox").dataSource.read();

        var fundid = $("#gfid").val() == 1 ? 0 : 1
        var mode_trans = $("#gf_currentid").val()
        if (fundid == 0 && mode_trans == 1) { //gf and current
            $("#ooe").data("kendoComboBox").value("")
            $("#ooe").data("kendoComboBox").dataSource.read();
            //$("#projectaip").data("kendoDropDownList").dataSource.read();
        }
        else { //excess and trust fund
            $("#account").data("kendoComboBox").value("")
            $("#account").data("kendoComboBox").dataSource.read()
        }
        loadwfpritem()

    }
    function fnaccount() {
        return {
            programid: $("#ooe").val(),
            tyear: $("#wfpyear").val(),
            selname: $("#ooe").data("kendoComboBox").text(),
            ooeid: $("#ooeclass").val(),
            fundid: $("#gfid").val() == 1 ? 0 : 1,
            officeid: $("#office").val(),
            mode: $("#gf_currentid").val()

        }
    }
    function fnooe_sel() {

        //$("#ooeclass").data("kendoDropDownList").value("")
        $("#ooeclass").data("kendoDropDownList").dataSource.read()

        $("#account").data("kendoComboBox").value("")
        $("#account").data("kendoComboBox").dataSource.read()
        //loadwfpritem()
    }

    function loadwfpritem() {
        var url = "@Url.Action("downloadwfpritems", "Report")";
        var office = $("#office").val();
        var program = $("#ooe").val()
        var account = $("#account").val()
        var tyear = $("#wfpyear").val();
        $.post(url,
            {
                office: $("#office").val(),
                program: program,
                account: account,
                tyear: tyear
            }, function (e) {})
    }

    function loadwfp_disburse() {

        // Show the loading spinner and hide the file icon
        document.getElementById("icon").style.display = "none";
        document.getElementById("loading").style.display = "inline";

        // Simulate processing time (e.g., an API call or background operation)
        setTimeout(() => {
            // Hide the loading spinner and show the file icon back
            document.getElementById("loading").style.display = "none";
            document.getElementById("icon").style.display = "inline";
        }, 30000); // Adjust time as needed

        var url = "@Url.Action("wfpstatus_disbursement", "Report")";
        var office = $("#office").val();
        var program = $("#ooe").val()
        var account = $("#account").val()
        var tyear = $("#wfpyear").val();
        $.get(url,
            {
                office: $("#office").val(),
                program: program,
                account: account,
                tyear: tyear
            }, function (e) { })

        document.getElementById("icon").style = "float:left;margin-top:8px;"
        document.getElementById("text").style = "float:right;margin-top: 5px;"
        document.getElementById("loading").style = "float:left;margin-top: -10px;margin-left:20px;zoom:2"

    }

    function fnooeid_sel() {
        $("#account").data("kendoComboBox").value("")
        $("#account").data("kendoComboBox").dataSource.read()
    }
    function covert_empty(str) {
        str = str.toString().replace(/,/g, "");
        parseInt(str, 20);
        return str;
    }
    function fnactivity() {
        return {
            officeid: $("#office").val(),
            tyear: $("#wfpyear").val(),
            mode_trans: $("#gf_currentid").val()
        }
    }
    function fnactivity_specific() {
        return {
            spec_id:$("#specid").val()
        }
    }
    function onGridApproveEdit(arg) {
        var gridName = $('#WFPApprovedGrid').data('kendoGrid');
        var dataRows = gridName.items();
        var rowIndex = dataRows.index(gridName.select());
        var ds = gridName.dataSource.view();

        if (arg.container.find("input[name=totalamount]").length > 0) {
            $("#WFPApprovedGrid").data("kendoGrid").closeCell(arg.container)
        }
    }
    function returnapprovewfp(id, isPPMP) {

        var gview = $("#WFPApprovedGrid").data("kendoGrid");
        var selectedItem = gview.dataItem(gview.select());
        var remarks = selectedItem.remarks == '' ? '' : selectedItem.remarks.toString().toUpperCase();
        var fundid = $("#gfid").val() == 1 ? 0 : 1
        var mode_trans = $("#gf_currentid").val()

        if (remarks == "" || remarks == "RETURN" || remarks =="SUBMITTED" || remarks.length == 0){
            swal("Warning!", "Please enter remarks!", "warning");
        }
        else {
            swal({
                title: "W A R N I N G!",
                text: "Return ITEM?",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "Yes",
                closeOnConfirm: false
            }, function () {
                var url = "@Url.Action("returnwfp", "Report")";
                $.get(url, { trnno: id, remarks: remarks, fundid: fundid, mode_trans: mode_trans, isPPMP: isPPMP }, function (e) {
                    if (e == "success") {
                        swal("Success!", "Item has been returned!", "success");
                        //$("#WFPGridSubmitted").data("kendoGrid").dataSource.read();
                        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
                    } else {
                        swal("Error!", e, "error");
                        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
                        //$("#WFPGridSubmitted").data("kendoGrid").dataSource.read();
                    }
                });
            });
        }
    }

    function returnaccount(programid,accountid,yearof) { //return wfp per account
        var gview = $("#wfpconsol").data("kendoGrid");
        var selectedItem = gview.dataItem(gview.select());
        var remark = selectedItem.remarks == '' ? '' : selectedItem.remarks.toString().toUpperCase();
        var fundid = $("#gfid").val() == 1 ? 0 : 1
        var mode_trans = $("#gf_currentid").val()
        if (remark == "" || remark == "RETURN" || remark =="SUBMITTED" || remark.length == 0) {
            swal("Warning!", "Please enter remarks!", "warning");
        }
        else {

            swal({
                title: "W A R N I N G!",
                text: "This will return all the items under this particular account. Do you want to proceed?",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "Yes",
                closeOnConfirm: false
            }, function () {
                var url = "@Url.Action("returnwfpaccount", "Report")";
                $.get(url, { programid: programid, accountid: accountid, yearof: yearof, remark: remark, fundid: fundid, mode_trans: mode_trans }, function (e) {
                    if (e == "success") {
                        swal("Success!", "Account has been returned!", "success");
                        $("#wfpconsol").data("kendoGrid").dataSource.read();
                        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
                    } else {
                        swal("Error!", e, "error");
                        $("#wfpconsol").data("kendoGrid").dataSource.read();
                    }
                });
            });
        }
    }
    function fnaccount_sel() {
        var officeid = $("#office").val()
        var programid = $("#ooe").val()
        var accountid = $("#account").val()
        var tyear = $("#wfpyear").val()
        var fundid = $("#gfid").val() == 1 ? 0 : 1
        var mode_trans = $("#gf_currentid").val()
        var supplemetal = $("#supplemetalapp").val()

        var url = "@Url.Action("getwfpappropriation", "Report")";
        $.get(url, { officeid: officeid, programid: programid, accountid: accountid, tyear: tyear, fundid: fundid, mode_trans: mode_trans, supplemetal: supplemetal }, function (e) {
            reqClearPartial()
            $("#appropriation").val(MoneyFormat(e.AppropriationNet))
            $("#allotment").val(MoneyFormat(e.allotment))
            $("#appbalance").val(MoneyFormat(e.balance))
            $("#appropriation_temp").val(e.AppropriationNet)
            $("#allotment_temp").val(e.allotment)
            $("#balance_temp").val(e.balance)
            $("#activity").data("kendoComboBox").value("")
            $("#activity").data("kendoComboBox").dataSource.read()
            $("#WFPApprovedGrid").data("kendoGrid").dataSource.read()
            $("#groupactivity").data("kendoComboBox").dataSource.read()
            $("#appropriation_whole").val(MoneyFormat(e.appropriation_whole))
            $("#reserve").val(MoneyFormat(e.reserve))
            $("#grid_responsible_person").data("kendoGrid").dataSource.read();
        });
    }
    function sync() {
        var m1 = $("#jan").val()
        var m2 = $("#feb").val()
        var m3 = $("#mar").val()
        var m4 = $("#apr").val()
        var m5 = $("#may").val()
        var m6 = $("#jun").val()
        var m7 = $("#jul").val()
        var m8 = $("#aug").val()
        var m9 = $("#sep").val()
        var m10 = $("#oct").val()
        var m11 = $("#nov").val()
        var m12 = $("#dec").val()
        var totqty = parseFloat(Number(m1) + Number(m2) + Number(m3) + Number(m4) + Number(m5) + Number(m6) + Number(m7) + Number(m8) + Number(m9) + Number(m10) + Number(m11) + Number(m12)).toFixed(2)
        $("#totqty").val(totqty)
        sync2()
    }
    function sync2() {
        var totalqty = $("#totqty").val()
        var amount = $("#amount").val()
        var days = $("#nodays").val()
        var appbal = $("#balance_temp").val()
        var amountTemp = $("#amountTemp").val()
        var mode = $("#mode").val()
        var totamount = parseFloat(Number(totalqty) * Number(amount) * Number(days)).toFixed(2)
        var appbal2 = parseFloat((Number(appbal) + Number(amountTemp))).toFixed(2)

        if (mode == 0) {
            $("#totamount").val(totamount)
        }
        else {
            $("#totamount").val(totamount)

        }
        if ($("#groupactivity").val() != 0) {
            sync3()
        }

    }

    $(function () {
        $("#jan").keyup(function (e) {
            sync();
        });
    });
    function getParam() {
        return {
            office: $("#office").val(),
            program: $("#ooe").val(),
            account: $("#account").val(),
            year: $("#wfpyear").val(),
            id: $("#review_tmp").val() == 1 ? 2 : 1,
            fundid: $("#gfid").val() == 1 ? 0 : 1,  //2-already reviewed; 1- for review
            mode_trans: $("#gf_currentid").val(),
            applied80per: 0,
            supplemetal: $("#showsupplemental").val(),
            wfpsummaryid: $("#wfpsummaryid").val()
        }
    }

    function deletewfp(id){

        swal({
            title: "Delete this particular WFP?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "Yes",
            closeOnConfirm: false,
            showLoaderOnConfirm: true
        },
            function () {
                var url = "@Url.Action("deletewfp", "Report")";
                $.get(url, { id: id }, function (e) {
                    if (e =='success'){
                        swal("Success", "WFP successfully deleted.", "success")
                        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read()
                    }
                    else{
                        swal("Error",e,"error")
                    }
                })
            })
    }
    function btnSubmit(id) {

        var officeid  = $("#office").val()
        var programid = $("#ooe").val()
        var accountid = $("#account").val()
        var year = $("#wfpyear").val()

        var url = "@Url.Action("submitwfp", "Report")";

        swal({
            title: "Submit WFP?",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "Yes",
            closeOnConfirm: false,
            showLoaderOnConfirm: true
        },
            function () {
                $.post(url, { officeid: officeid, programid: programid, accountid: accountid, year: year ,id:id}, function (d) {
                    if (d =='success'){
                        swal("Success", "WFP successfully submitted.", "success")
                        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
                    }
                    else{
                        swal("Error!", d, "error");
                    }
                })
            })
    }
    function closewfpsubmit() {
        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
    }

    function closewfpapproved() {
        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
    }

    function closewfpapproved_lce(){
        $("#WFPGridApproved_lce").data("kendoGrid").dataSource.read();
    }
    function closewfpstatus_review() {
        $("#wfpconsol").data("kendoGrid").dataSource.read();
    }
    function closewfpstatus_revision() {}
    function closewfpr() { }
    function closewfpdfppt(){}
    function btnApprove() {
        if ($('#SpanOnApproveProgress').css("display") == 'none') {
            $('#SpanOnApproveProgress').css("display", "auto");
            $('#spanthumbsup').css("display", "none");
            var url = "@Url.Action("ApproveWFP", "Report")";
            var idsToSend = [];
            var AmountsToSend = [];
            var BudgetToSend = [];
            var grid = $("#WFPApprovedGrid").data("kendoGrid")
            var ds = grid.dataSource.view();
            var balapp = covert_empty($("#appbalance").val());
            var yearof = $("#wfpyear").val()
            var programid = $("#ooe").val()
            var accountid = $("#account").val()
            var ooeclass = $("#ooeclass").val()

            var officeid = $("#office").val();
            var officename = $("#office").data("kendoComboBox").text()
            var repHistory = $("#repHistory").val();
            var prepby = $("#prepby").val();
            var printstatus = 3
            var projectaip = 0//$("#projectaip").val()
            var fundsource = "";//$("#fundsource").data("kendoDropDownList").text()

            var accountname = $("#account").data("kendoComboBox").text()
            var municipal = "";//$("#municipal").data("kendoDropDownList").text()
            var barangay = "";//$("#barangay").data("kendoDropDownList").text()
            var ooeclassname = $("#ooeclass").data("kendoDropDownList").text()
            var activityid = $("#activity").val() == "" ? 0 : $("#activity").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var reviewpersub = $("#reviewpersub").val();
            var subppaid = $("#groupactivity").val();
            var subppabal = covert_empty($("#BalAppropriation").val())
            var mode_trans = $("#gf_currentid").val()
            var specid = $("#activity_sub").val()
            var issupplemetalid = $("#supplemetalapp").val();

            for (var i = 0; i < ds.length; i++) {
                var row = grid.table.find("tr[data-uid='" + ds[i].uid + "']");
                var checkbox = $(row).find(".checkbox");
                if (checkbox.is(":checked")) {
                    idsToSend.push(ds[i].wfpid); //loops
                }
            }
            if (idsToSend == "" && reviewpersub == 0 && accountid  != 59787) {
                swal({ title: "Warning!", text: "Please tick the checkbox first!", timer: 2500, showConfirmButton: false, type: "warning" });
                $('#SpanOnApproveProgress').css("display", "none");
                $('#spanthumbsup').css("display", "auto");
            }
            //else if (Number(balapp) < 0 && accountid != 70109) { ////whole of nation approach
            else if (Number(balapp) < 0 && reviewpersub == 0) { ////whole of nation approach
                swal("Warning", "Insufficient balance, please check the appropriation details!", "warning")
                $('#SpanOnApproveProgress').css("display", "none");
                $('#spanthumbsup').css("display", "auto");
            }
            else if (reviewpersub == 1 && subppaid == 0) {
                swal({ title: "Warning!", text: "Please select sub-ppa from the combo box!", timer: 2500, showConfirmButton: false, type: "warning" });
                $('#SpanOnApproveProgress').css("display", "none");
                $('#spanthumbsup').css("display", "auto");
            }
            else if (reviewpersub == 0 && subppaid != 0) {
                swal({ title: "Warning!", text: "Please tick the checkbox to review the wfp per sub-ppa!", timer: 2500, showConfirmButton: false, type: "warning" });
                $('#SpanOnApproveProgress').css("display", "none");
                $('#spanthumbsup').css("display", "auto");
            }
            else if (reviewpersub == 1 && subppaid != 0 && Number(subppabal) < 0) {
                swal({ title: "Warning!", text: "Insufficient balance, please check the sub-ppa appropriation balance!", timer: 2000, showConfirmButton: false, type: "warning" });
                $('#SpanOnApproveProgress').css("display", "none");
                $('#spanthumbsup').css("display", "auto");
            }
            else if (programid == 218 && activityid == 0) {
                swal({ title: "Warning!", text: "Please select an activity prior to marking the WFP as reviewed.", timer: 2000, showConfirmButton: false, type: "warning" });
                $('#SpanOnApproveProgress').css("display", "none");
                $('#spanthumbsup').css("display", "auto");
            }
            else {
                swal({
                    title: "Confirmation!",
                    text: "This will set the WFP as Reviewed. Do you want to proceed?",
                    type: "info",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    confirmButtonColor: "#1fa67a",
                    confirmButtonText: "Yes",
                    showLoaderOnConfirm: true,
                },
                function (isConfirm) {
                    if (isConfirm) {
                        $.post(url, { transno: idsToSend, yearof: yearof, programid: programid, accountid: accountid, ooeclass: ooeclass, officeid: officeid, officename: officename, prepby: prepby, repHistory: repHistory, printstatus: printstatus, projectaip: projectaip, fundsource: fundsource, accountname: accountname, municipal: municipal, barangay: barangay, ooeclassname: ooeclassname, activityid: activityid, fundid: fundid, reviewpersub: reviewpersub, subppaid: subppaid, mode_trans: mode_trans, specid: specid, issupplemetalid: issupplemetalid }, function (d) {
                            if (d == 1) {
                                swal({ title: "Success!", text: "Selected items has been reviewed!", timer: 1000, showConfirmButton: false, type: "success" });
                                $("#WFPApprovedGrid").data("kendoGrid").dataSource.read();
                                $("#wfpconsol").data("kendoGrid").dataSource.read();
                                $('#SpanOnApproveProgress').css("display", "none");
                                $('#spanthumbsup').css("display", "auto");
                            }
                            else {
                                if (d == "ErrorNAS"){
                                    swal("Error","An error occurred while attempting to generate the Work and Financial Plan (WFP) for digital signature. Please review your actions.", "error");
                                    $('#SpanOnApproveProgress').css("display", "none");
                                    $('#spanthumbsup').css("display", "auto");
                                }
                                else{
                                    swal("Something Went Wrong!", d, "error");
                                    $('#SpanOnApproveProgress').css("display", "none");
                                    $('#spanthumbsup').css("display", "auto");
                                }
                            }
                        })
                    }
                    else {
                        $('#SpanOnApproveProgress').css("display", "none");
                        $('#spanthumbsup').css("display", "auto");
                    }
                })
            }
        }
    }

    function fnincludeppa() {
        if (document.getElementById("includeppa").checked) {
            document.getElementById("includeppa").value = 1
        }
        else {
            document.getElementById("includeppa").value = 0
        }
    }
    function onDataBound(e) {
        $(".k-hierarchy-cell").hide();
        $(".k-hierarchy-col").hide();
        var grid = $("#WFPApprovedGrid").data("kendoGrid")
        var ds = grid.dataSource.view();
        var rows = e.sender.tbody.children();
        var isPPMP = 0;
        var hideCol = [];
        var isSubppa = 0;
        var isupplemental = 0;
        var withad = 0;
        for (var i = 0; i < ds.length; i++) {
            isPPMP = ds[i].isPPMP;
            trnno = ds[i].wfpid;
            isSubppa = ds[i].subppaid;
            isupplemental = ds[i].isupplemental;
            var row = $(rows[i]);
            //if (isPPMP == 1) {
            //    row.addClass("ChangeBackColor");
            //}
            //if (isSubppa != 0) {
            //    row.addClass("ChangeSubppaColor");
            //}

            if (isPPMP == 1 && isSubppa == 0 && isupplemental == 0) {
                row.addClass("ChangeBackColor");
                //   $('#deleteid' + trnno + '').css("display", "none");
            }
            else if (isPPMP == 1 && isSubppa != 0 && isupplemental == 0) {
                row.addClass("ChangeSubppaColor");
            }
            else if (isPPMP == 0 && isSubppa != 0 && isupplemental == 0) {
                row.addClass("ChangeNotPPMPSubppaColor");
            }
            else if (isupplemental == 1) {
                row.addClass("changesupplemental");

            }
            else if (withad == 1 && isPPMP == 0 && isupplemental==0) {
                row.addClass("changesBackColorWithAD");

            }
            else if (withad == 1 && isPPMP == 1 && isupplemental == 0) {
                row.addClass("changesBackColorWithADPPMP");

            }
            if ($("#review_tmp").val() == 1 || $("#review_tmp").val() == 1) {
                $('#check' + trnno + '').css("display", "none")
                $('#returnid' + trnno + '').css("display", "none")

                grid.showColumn('remarks')
             //   grid.hideColumn(ds[1]);
            }
            else {
                $('#check' + trnno + '').css("display", "normal")
                $('#returnid' + trnno + '').css("display", "normal")
                grid.showColumn('check' + trnno + '');
                grid.hideColumn('remarks')
            }

            //for (var i = 0; i < ds.length; i++) {
            //    withapprove = ds[i].withapprove;
            //    accountid = ds[i].accountid;
            //    var row = $(rows[i]);
            //    if (withapprove != 0) {
            //        $('#returnaccount' + accountid + '').css("display", "none");
            //    }
            //}


            //else {
            //    //   row.addClass("ChangeApprovedColor");
            //    $('#deleteid' + trnno + '').css("display", "normal");
            //}
        }
    }
    function searchAccount() {
        var $filter = new Array();
        $filter = [];

        if ($('#SearchData').val().length > 0) {
            $filter.push({ field: "activityname", operator: "contains", value: $('#SearchData').val() }),
            $filter.push({ field: "specificactivity", operator: "contains", value: $('#SearchData').val() }),
            $filter.push({ field: "particular", operator: "contains", value: $('#SearchData').val() }),
            $filter.push({ field: "unit", operator: "contains", value: $('#SearchData').val() }),
            $filter.push({ field: "subppaname", operator: "contains", value: $('#SearchData').val() });
        }

        $('#WFPApprovedGrid').data('kendoGrid').dataSource.filter({
            logic: "or",
            filters: $filter
        });

    }

    function searchAccountOnly() {
        var $filter = new Array();
        $filter = [];

        if ($('#SearchAccountOnly').val().length > 0) {
            $filter.push({ field: "office", operator: "contains", value: $('#SearchAccountOnly').val() }),
            $filter.push({ field: "accountname", operator: "contains", value: $('#SearchAccountOnly').val() });
        }

        $('#wfpconsol').data('kendoGrid').dataSource.filter({
            logic: "or",
            filters: $filter
        });
    }

    $(function () {
        $("#SearchAccountOnly").keypress(function (e) {
            if (e.keyCode == 13) {
                searchAccountOnly();
            }
        });
    });

    $(function () {
        $("#SearchData").keypress(function (e) {
            if (e.keyCode == 13) {
                searchAccount();
            }
        });
    });

    function fngroupactivity() {
        return {
            year: $("#wfpyear").val() ,
            program: $("#ooe").val(),
            account: $("#account").val(),
            excessid: 0
        }
    }
    function fnMainaccount() {

        //$("#MainAppropriationid").show();
        //$("#SubAppropriationid").show();
        //$("#BalAppropriationid").show();
        var MotherAccount = $("#groupactivity").val();
        var ProposalYear = $("#wfpyear").val();
        var mode_trans = $("#gf_currentid").val()
        var fundid = $("#gfid").val() == 1 ? 0 : 1
        var accountid = $("#account").val() == "" ? 0 : $("#account").val()
        if (accountid == 2861) {

            var url = "@Url.Action("SubAccountSAAB_WFP20", "Maintenance")";
            $.get(url, { MotherAccount: MotherAccount, ProposalYear: ProposalYear }, function (d) {
                $("#MainAppropriation").val(MoneyFormat(d.Appropriation));
                $("#SubAppropriation").val(MoneyFormat(d.AllotedAmount));
                $("#BalAppropriation").val(MoneyFormat(d.BalanceAllotment));
            })
        }
        else {
            var url = "@Url.Action("SubAccountSAAB_WFP", "Maintenance")";
            $.get(url, { MotherAccount: MotherAccount, ProposalYear: ProposalYear }, function (d) {
                $("#MainAppropriation").val(MoneyFormat(d.Appropriation));
                $("#SubAppropriation").val(MoneyFormat(d.AllotedAmount));
                $("#BalAppropriation").val(MoneyFormat(d.BalanceAllotment));
            })
        }
        if (mode_trans == 1 && fundid == 0)
        { sync3(); }

    }
    function sync3() {

        var amount = $("#totamount").val();
        var amountTemp = $("#amountTemp").val() == "" ? 0 : $("#amountTemp").val();
        var appBal = 0;
        var nonofficeidtemp = $("#nonofficeid_temp").val()
        var MotherAccountTemp = groupactivity == 0 ? nonofficeidtemp : $("#groupactivity").val(); //$("#MotherAccount").val()

        var MotherAccount = groupactivity == 0 ? nonofficeidtemp : $("#groupactivity").val();
        var ProposalYear = $("#wfpyear").val();
        var nonofficeidparentTemp = $("#nonofficeidparent_temp").val();

        var url2 = "@Url.Action("getParticularBalance", "Maintenance")";
        var noidparentTemp = 0;

        $.get(url2, { MotherAccount: MotherAccount, ProposalYear: ProposalYear }, function (e) {

            if (MotherAccountTemp != 0) { //Sub-account
                if (MotherAccount != nonofficeidparentTemp) {
                    noidparentTemp = amountTemp;
                } else {
                    noidparentTemp = 0;
                }
                appBal = parseFloat(Number(e)).toFixed(2) - Number(noidparentTemp) - parseFloat(Number(amount)).toFixed(2)

                appBal = Number(appBal) + Number(amountTemp)
                $("#mainAccountUsed").val(1)

            }
            else {//main accoun

                appBal = Number(amountTemp) - Number(e)
                appBal = Number(amount) - Number(appBal)

                $("#mainAccountUsed").val(0)
            }
            $("#appBalTemp").val(appBal)

            if ($("#appBalTemp").val() < 0) {
                swal("", "Amount must NOT be greater than appropriation balance!", "warning");
                $("#amount").val(0)
                $("#totamount").val(0)
            }
        });
    }
    function btndetails() {
        var grid = $('#WFPApprovedGrid').data('kendoGrid');
        if (document.getElementById("btndetails_id").text == " Show Details") {
            $("#btndetails_id").html("<span class='fa fa-regular-eye'></span> Hide Details");
            grid.showColumn('account_parent');
            grid.showColumn('activityname');
            grid.showColumn('datetimeentered')
            grid.showColumn('remarks')
            grid.showColumn('prepareuser')
            grid.showColumn('subppaname')
            grid.columns[4].width = "210px;"
        }
        else {
            $("#btndetails_id").html("<span class='fa fa-regular-eye'></span> Show Details");
            grid.hideColumn('account_parent');
            grid.hideColumn('activityname');
            grid.hideColumn('datetimeentered')
            grid.hideColumn('remarks')
            grid.hideColumn('prepareuser')
            grid.hideColumn('subppaname')
            grid.columns[4].width = "150px;"
        }
    }

    function btnsupplemental() {
        var grid = $('#WFPApprovedGrid').data('kendoGrid');
        if (document.getElementById("btnsupplemental_id").text == " Show Supplemental") {
            $("#btnsupplemental_id").html("<span class='fa fa-regular-eye'></span> Show All Items");
            $("#showsupplemental").val(1)
        }
        else {
            $("#btnsupplemental_id").html("<span class='fa fa-regular-eye'></span> Show Supplemental");
            $("#showsupplemental").val(0)
        }
        grid.dataSource.read()
    }

    function getwfparconsol() {

        var ids = $("#review_tmp").val() == 1 ? 1 : 0
        var showspco = $("#checkshowspco").val() == "" ? 0 : $("#checkshowspco").val()
        var mode_trans = $("#gf_currentid").val()
        return {
            year: $("#wfpyear").val(),
            review: ids,
            showspco: showspco,
            fundid: $("#gfid").val() == 1 ? 0 : 1,
            mode_trans: mode_trans
        }
    }

    function WFPgridconsol() {
        var entityGrid = $("#wfpconsol").data("kendoGrid");
        var selItem = entityGrid.dataItem(entityGrid.select());
        var mode_trans = $("#gf_currentid").val()
        var ids = $("#review_tmp").val() == 1 ? 1 : 0

        $("#office").data("kendoComboBox").value(selItem.officeid)
        fnOffice_sel()

        $("#ooe").data("kendoComboBox").value(selItem.programid)

        $("#ooeclass").data("kendoDropDownList").value(selItem.ooeid)
        fnooe_sel()

        $("#account").data("kendoComboBox").value(selItem.accountid)
        fnaccount_sel()
    }
    function onDataBoundConsol(e) {
        $(".k-hierarchy-cell").hide();
        $(".k-hierarchy-col").hide();
        var grid = $("#wfpconsol").data("kendoGrid")
        var ds = grid.dataSource.view();
        var rows = e.sender.tbody.children();
        var withapprove = 0;
        var accountid = 0
        for (var i = 0; i < ds.length; i++) {
            withapprove = ds[i].withapprove;
            accountid = ds[i].accountid;
            var row = $(rows[i]);
            if (withapprove != 0) {
                $('#returnaccount' + accountid + '').css("display", "none");
            }
        }
    }
    function Check_click(cb, officeid) {
        var officeid_drp = $("#office").val()
        var programid = $("#ooe").val()
        var accountid = $("#account").val()
        var activity = $("#activity").val() == "" ? 0 : $("#activity").val()
        var tyear = $("#wfpyear").val()
        var url = "@Url.Action("res_office_sel", "Report")";
        var resid= $("#responoffice").val() == 1 ? 1 : 0
        var cbValue = cb.checked;
        var trulse = cbValue == true ? 1 : 0

        //cb.value = cbValue;
        //var thisRow = $("#grid_responsible_person").data("kendoGrid").dataItem(cb.closest("tr"));
        //thisRow.Checked = cbValue;

        if (officeid_drp != 0 && programid != 0 && accountid != 0 ) {
            $.post(url, { officeid_drp: officeid_drp, programid: programid, accountid: accountid, officeid_sel: officeid, tyear: tyear, trulse: trulse, resid: resid }, function (d) {
                $("#grid_responsible_person").data("kendoGrid").dataSource.read()
            })
        }
        else if (officeid_drp == 0 || programid == 0 || accountid == 0 && cbValue == true) {
            swal("", "Please select an office, program and account respectively!", "info")
            $("#grid_responsible_person").data("kendoGrid").dataSource.read();
        }
    }
    function onDataBoundResperson(e) {
        $(".k-hierarchy-cell").hide();
        $(".k-hierarchy-col").hide();
        var grid = $("#grid_responsible_person").data("kendoGrid")
        var ds = grid.dataSource.view();
        var rows = e.sender.tbody.children();
        var actioncode = 0;
        var officeid = 0;
        for (var i = 0; i < ds.length; i++) {
            actioncode = ds[i].actioncode;
            officeid = ds[i].officeid;
            var row = $(rows[i]);
            if (actioncode == 1) {
                row.addClass("ChangeBackColorRPerson");
                $('#check' + officeid + '').attr("checked", true);
            }
            else {
                $('#check' + officeid + '').attr("checked", false);
            }
        }
    }
    function getresofficepar() {

        return {
            office: $("#office").val(),
            account: $("#account").val(),
            year: $("#wfpyear").val(),
            resid: $("#responoffice").val() == 1 ? 1 : 0
        }
    }
    function btnreview() {
        var grid = $('#wfpconsol').data('kendoGrid');
        var grid2 = $("#WFPApprovedGrid").data("kendoGrid")

        if (document.getElementById("btnreview_id").text == " Show Reviewed") {
            $("#btnreview_id").html("<span class='fa fa-info-circle'></span> Hide Reviewed");
            $("#review_tmp").val(1)
            grid2.columns[41].width = "80px;"
            grid2.columns[4].width = "150px;"
            //$("#btnSave").hide()
        }
        else {
            $("#btnreview_id").html("<span class='fa fa-info-circle'></span> Show Reviewed");
            $("#review_tmp").val(0)
            grid2.columns[41].width = "150px;"
            grid2.columns[4].width = "210px;"
            //$("#btnSave").show()
        }
        grid.dataSource.read();
        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read()
    }
    function btnspecial_co() {
        if (document.getElementById("checkshowspco").checked == true) {
            $("#checkshowspco").val(1)
        }
        else {
            $("#checkshowspco").val(0)
        }
        $("#wfpconsol").data("kendoGrid").dataSource.read()
    }
    function fnyear() {
        $("#wfpconsol").data("kendoGrid").dataSource.read()
    }
    function showpdfbin() {
     
        var url = "@Url.Action("ShowPDFBin", "Report")";
        $.get(url, function (e) {
            //if (e == 1) {
            //    $("#div_gfid").hide();
            //    document.getElementById("div_gfid").style = "display:none"
            //    tflblid_click()
            //}
            //else {
            //    $("#div_gfid").show();
            //    document.getElementById("div_gfid").style = "display:inline-block"

            //}
        })
    }
    function wfpsummary_click() {
        if (document.getElementById("wfpsummaryid").checked) {
            $("#wfpsummaryid").val(1)
        }
        else {
            $("#wfpsummaryid").val(0)
        }
        $("#WFPApprovedGrid").data("kendoGrid").dataSource.read()

    }
</script>
<h2 style="font-size:18px;font-weight:bold"><span class="fa fa-tasks"></span> Work and Financial Plan (For Review) </h2>
<div style="display:inline-block;border-style:solid;border-width:1px;text-align:center;width:747px;background-color:lightgray;border-color:lightgray">
    <div id="div_gfid" style="display:none">
        <input type="radio" id="gfid" checked value="1" onclick="gfid_click()" style="width:25px;zoom:1.2" />
        <label style="display:inline-block;font-size:13px;" onclick="gflblid_click()">General Fund</label>
    </div>
    @*@if (Account.UserInfo.eid == 5580)
    {*@
        <div style="display:inline-block;margin-left:10px;">
            <input type="radio" id="tfid" onclick="tfid_click()" style="width:25px;zoom:1.2" />
            <label style="display:inline-block;font-size:13px;" onclick="tflblid_click()">Trust Fund</label>
        </div>
    @*}*@
</div>
<div id="gftransid" style="display:inline-block;border-style:solid;border-width:1px;text-align:center;width:747px;border-color:lightgray">
    <div style="float:left;background-color:#54625E;width:100%;text-align:left;border-top-color:chocolate;border-top-style:solid;border-width:1px;color:white"><span style="margin-left:5px;"><b>MODE</b></span></div>
    <br />
    <div style="display:inline-block;margin-right:175px;">
        <input type="radio" id="gf_currentid" checked value="1" onclick="gf_current_id_click()" style="width:25px;zoom:1.2" />
        <label style="display:inline-block;font-size:13px;" onclick="gf_current_lblid_click()">Current</label>
        @*@if (Account.UserInfo.eid == 5580)
        {*@
            <input type="radio" id="gf_excessid" value="0" onclick="gf_excess_id_click()" style="width:25px;zoom:1.2;margin-left:10px" />
            <label style="display:inline-block;font-size:13px;" onclick="gf_excess_lblid_click()">Continuing</label>
        @*}*@
    </div>
</div>
<div id="headerid" style="margin-top:5px;display:normal">

    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
        Year <span style="color:red">*</span>
    </label>
    <br />
    <div style="margin-left:10px;width:100px;margin-top:0px">
        @(Html.Kendo().ComboBox()
                .Name("wfpyear")
                .DataTextField("ProposalYear")
                .DataValueField("ProposalYear")
                .SelectedIndex(0)
                .Events(e => e.Change("fnyear"))
                .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })

                .DataSource(source => source.Read(read => read.Action("WFPYears", "PYear")))
        )
        <div id="div_prstatusid" style="float:left;margin-top:0px;margin-left:103px;vertical-align:middle">
            <div class="k-button k-button-icontext" style="width: 100px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;height:30px;vertical-align:middle; text-align:center" title="Click to generate PR status!" onclick="vwpPR_status()"><span id="icon" style="margin-top:8px;" class="fa fa-file"></span><span id="text" style="margin-top:10px;"> WFP- PR Status</span><span id="loading" class="fa fa-spinner fa-spin"
      style="display: none; margin-left: 5px;"></span></div>
            <div class="k-button k-button-icontext" style="display:none; width: 100px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:-25px;margin-top:-30px; margin-bottom:0px;font-size:10px;height:30px;vertical-align:middle; text-align:center"><a href="@Url.Action("ShowPDFBin", "Report", new { id = 2 })" target="_blank"> Show PDF </a></div>
        </div>
    </div>
    <div style="float:left;margin-top:40px">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to view submitted WFP!" onclick="vwSubmitted()"><span class="fa fa-send"></span> Submitted</div>
    </div>
    <div style="float:left;margin-top:40px;margin-left:-79px;">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to view reviewed WFP!" onclick="vwApproved()"><span class="fa fa-book"></span> Reviewed</div>
    </div>
    <div style="float:left;margin-top:40px;margin-left:-79px;">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to view approved WFP!" onclick="vwApproved_lce()"><span class="fa fa-thumbs-o-up"></span> Approved</div>
    </div>
    <div style="float:left;margin-top:40px;margin-left:-79px;">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to open WFP status!" onclick="wfpstatus()"><span class="fa fa-list-alt"></span> Status</div>
    </div>
    <div style="float:left;margin-top:40px;margin-left:-79px;">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to open WFP revision!" onclick="wfprevision()"><span class="fa fa-undo"></span> Revised</div>
    </div>
    <div style="float:left;margin-top:40px;margin-left:-78px;">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to open PR item!" onclick="wfpritem()"><span class="fa fa-list"></span> PR Item</div>
    </div>
    <div style="float:left;margin-top:40px;margin-left:-78px;">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 80px;float:right;border-style:solid;border-width:1px; margin-top: 20px; margin-right:80px;margin-top:-30px; margin-bottom:0px;font-size:10px;" title="Click to open review for DFPPT!" onclick="wfpdfppt()"><span class="fa fa-list"></span> DFPPT</div>
    </div>
    <div id="searchAccountid_2" style="height: 25px; margin-top: -32px; float: right;">
        <input type="text" style="width:132px;border-collapse:collapse;margin:0px;border-style:solid;margin-left:0px;height:70%;outline:none;font-family:'Segoe UI Light_','Open Sans Light',Verdana,Arial,Helvetica,sans-serif;float:left;" placeholder="Search..." id="SearchAccountOnly" name="SearchAccountOnly">
        <div class="k-button k-button-icontext" style="height:25px;width:40px;border-style:solid;" onclick="searchAccountOnly()"><span class="mif-search"></span></div>
    </div>
    <div style="display:inline-block;width:100%;margin-top:-5px;">
        @(Html.Kendo().Grid<iFMIS_BMS.BusinessLayer.Models.WFPrepare>()
            .Name("wfpconsol")
            .HtmlAttributes(new { style = "" })
            .Scrollable()
            .Columns(col =>
            {
                col.Template(@<text></text>)
                //col.Bound(m => m.office)
            .HeaderTemplate(@<text>Office</text>)
            .Width(50)
            .HtmlAttributes(new { style = "text-align:left;;font-size:12px" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=office# </div>");
                col.Bound(m => m.officeid)
            .HeaderTemplate(@<text>office id</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=officeid# </div>");
                col.Bound(m => m.programid)
            .HeaderTemplate(@<text>program id</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=programid# </div>");
                col.Bound(m => m.accountid)
            .HeaderTemplate(@<text>account id</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=accountid# </div>");
                col.Template(@<text></text>)
            .HeaderTemplate(@<text>Account</text>)
            .Width(170)
            .HtmlAttributes(new { style = "text-align:left;;font-size:12px" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=accountname# </div>");
                col.Template(@<text></text>)
            .HeaderTemplate(@<text>Date/Time <br />Submitted</text>)
            .Width(90)
            .HtmlAttributes(new { style = "text-align:left;;font-size:12px" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=datetimeentered# </div>");
                col.Bound(m => m.yearof)
            .HeaderTemplate(@<text>Year</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=yearof# </div>");
                col.Bound(m => m.ooe)
            .HeaderTemplate(@<text>OOE</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=ooe# </div>");
                col.Bound(m => m.ooeid)
            .HeaderTemplate(@<text>ooe ID</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=ooeid# </div>");
                col.Bound(m => m.remarks)
            .HeaderTemplate(@<text>Remark</text>)
            .Width(100)
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=remarks# </div>");
                col.Bound(m => m.withapprove)
            .HeaderTemplate(@<text>with approved</text>)
            .Width(0)
            .Hidden()
            .HtmlAttributes(new { style = "text-align:left;" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate("<div>#=withapprove# </div>");
                col.Template(@<text></text>)
            .HeaderTemplate(@<text></text>)
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:10px;color:beige;" })
            .ClientTemplate(
                "<div id='returnaccount#=accountid#' style='' onclick='returnaccount(#=programid#,#=accountid#,#=yearof#)'><span class='fa fa-undo' title='Click to return account!' style='font-size: 16px;margin: 1px;margin-top: -1px;margin-left: 2px;margin-right:2px;width:25px;color:red;text-align:center;cursor:pointer;'> </span></div> ")
            .HtmlAttributes(new { style = "vertical-align: top;text-align:center" })
            .Width(25);
            })
            .ToolBar(toolbar =>
            {
                toolbar.Custom().Text("<input id='checkshowspco' type='checkbox' value=0 style='zoom:1.2'  title='Tick the box to set as reviewed!'  class='checkbox'/> Show Special Project & CO").Name("btnreview").Url("javascript:void(0)").HtmlAttributes(new { onclick = "btnspecial_co()", id = "btnspecial_co_id" });
                toolbar.Custom().Text("<span class='fa fa-info-circle'></span> Show Reviewed").Name("btnreview").Url("javascript:void(0)").HtmlAttributes(new { onclick = "btnreview()", id = "btnreview_id" });
            })
            .Editable(editable => editable.Mode(GridEditMode.InCell))
            .Resizable(e => e.Columns(true))
            .Pageable(pageable => pageable
            .Refresh(true)
            .ButtonCount(5))
            .HtmlAttributes(new { @class = "table-responsive" })
            .Selectable()
            .Events(e => e.DataBound("onDataBoundConsol").Change("WFPgridconsol"))
            .DataSource(dataSource => dataSource
            .Ajax()
            .Batch(true)
            .Model(m => m.Id(i => i.locationid))
            .ServerOperation(true)
            .PageSize(100)
            .Read(read => read.Action("GetWFPConsol", "Report").Data("getwfparconsol"))
            )
        )
    </div>
    <br />
    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
        Office <span style="color:red">*</span>
    </label>
    <div style="margin-left:10px;width:500px;">
        @(Html.Kendo().ComboBox()
            .Name("office")
            .DataTextField("offname")
            .DataValueField("OfficeID")
            .AutoBind(true)
            .Placeholder("Select office")
            .Filter("contains")
            .MinLength(3)
            .Events(e => e.Change("fnOffice_sel"))
            .SelectedIndex(-1)
            .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })
            .DataSource(source =>
            {
                source.Read(read =>
                {
                    read.Action("GetOfficeWFP", "Report").Data("fnoffice");
                })
            .ServerFiltering(false);
            })
        )
        @*<div id="btnppmp" class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 200px;float:right; margin-top: 20px; margin-right:-155px;margin-top:-0px;background-color:cornflowerblue;border-radius:50px;color:white; margin-bottom:0px;width:150px;" onclick="reqPPMP('#dialog')">
            <span class="fa fa-download"></span> Download PPMP
        </div>*@
        <label style="display:inline-block;margin-left:0px;margin-top:10px;">
            Program <span id="program_reqid" style="color:red">*</span>
        </label>
        <div style="margin-left:0px;width:500px;">
            @(Html.Kendo().ComboBox()
            .Name("ooe")
            .DataTextField("OOE")
            .DataValueField("ProgramID")
            .AutoBind(true)
            //  .Placeholder("Select Office...")
            .Filter("contains")
            .MinLength(3)
            .Events(e => e.Change("fnooe_sel"))
            .SelectedIndex(-1)
            .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })
            .DataSource(source =>
            {
                source.Read(read =>
                {
                    read.Action("GetOOEWFP", "Report").Data("fnooe");
                })
            .ServerFiltering(false);
            })
            )
        </div>
        <div style="float:left;margin-top:-61px;margin-left:520px;width:300px;">
            <label style="display:inline-block;margin-left:0px;margin-top:10px;">
                Expense Class <span id="ooe_reqid" style="color:red">*</span>
            </label>
            <div style="margin-left:0px;width:100px;">
                @(Html.Kendo().DropDownList()
            .Name("ooeclass")
            .DataTextField("ooename")
            .DataValueField("ooeid")
            .HtmlAttributes(new { style = "width:100%; height:100%;text-align:center", @class = "form-control autoselect" })
            .DataSource(source =>
            {
                source.Read(read =>
                {
                    read.Action("GetWFPooe", "Report").Data("fnprogram");
                })
            .ServerFiltering(false);
            })
            .Events(e => e.Change("fnooeid_sel"))
            )
            </div>
        </div>
        <label style="display:inline-block;margin-left:0px;margin-top:10px;">
            Account <span style="color:red">*</span>
        </label>
        <div style="margin-left:0px;width:500px;">
            @(Html.Kendo().ComboBox()
            .Name("account")
            .DataTextField("AccountName")
            .DataValueField("AccountID")
            .AutoBind(true)
            .Placeholder("Select account!")
            .Filter("contains")
            .MinLength(3)
            .Events(e => e.Change("fnaccount_sel"))
            .SelectedIndex(-1)
            .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })
            .DataSource(source =>
            {
                source.Read(read =>
                {
                    read.Action("GetaccountWFP", "Report").Data("fnaccount");
                })
            .ServerFiltering(false);
            })
            )
            <div id="btnPrint" title="Print WFP!" class="k-button k-button-icontext" style="float:right;margin-top:-30px;margin-right:-64px; bottom: 15px;width: 65px;background-color:cornflowerblue;color:white;border-radius:50px;margin-bottom:0px" onclick="reqPrint()"><span class="mif-printer" title="Print WFP!"></span> WFP</div>
            <div style="display:inline-block">
                <input type="checkbox" value="0" id="wfpsummaryid" onclick="wfpsummary_click()" style="zoom:1.2" />
                <label style="display:inline-block;font-size:12px">View Revision</label>
            </div>
        </div>
    </div>
</div>
<div>
    <div style="background-color:lightgray;margin-left:10px;text-align:left;margin-top:10px;height:30px;vertical-align:middle;width:747px">
        <label style="margin-left:10px;float:left;margin-top:5px;">
            Appropriation Details
        </label>
        <div style="display:inline-block;margin-left:150px;margin-top:5px;">
            <input style="zoom:1.2" type="checkbox" id="supplemetalapp" onclick="supplemetalapp()" value="0" />
            <span style="font-size:14px;margin-left:2px;cursor:pointer;color:green" onclick="lblsupplemetalapp()"><b><u> Supplemental</u></b></span>
        </div>
    </div>
    <div style="border-style:solid;height:75px;border-width:1px;margin-left:10px;width:745px;border-color:lightgray">
        <div style="display:inline-block;margin-left:5px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Appropriation
            </label>
            <div style="margin-left:10px;">
                <input id="appropriation_whole" type="text" min="0" value="0.00" readonly style="width:115px;color:#050afc" />
            </div>
        </div>
        <div style="display:inline-block;margin-left:3px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Reserve (10%)
            </label>
            <div style="margin-left:10px;">
                <input id="reserve" type="text" min="0" value="0.00" readonly style="width:115px;color:#ff0000" />
            </div>
        </div>
        <div style="display:inline-block;margin-left:3px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Appropriation (Net)
            </label>
            <div style="margin-left:10px;">
                <input id="appropriation" type="text" min="0" value="0.00" readonly style="width:115px" />
            </div>
        </div>
        <div style="display:inline-block;margin-left:0px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Total Amount (AIP)
            </label>
            <div style="margin-left:10px;">
                <input id="allotment" type="text" min="0" value="0.00" readonly style="width:115px;color:#ff0000" />
            </div>
        </div>
        <div style="display:inline-block;margin-left:0px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Balance
            </label>
            <div style="margin-left:10px;">
                <input id="appbalance" type="text" min="0" value="0.00" readonly style="width:115px;color:green" />
            </div>
        </div>
    </div>
</div>

<div id="searchAccountid" style="height: 30px; margin-top: 10px; float: right;">
    <input type="text" style="width:212px;border-collapse:collapse;margin:0px;border-style:solid;margin-left:0px;height:70%;outline:none;font-family:'Segoe UI Light_','Open Sans Light',Verdana,Arial,Helvetica,sans-serif;float:left;" placeholder="Search..." id="SearchData" name="SearchData">
    <div class="k-button k-button-icontext" style="height:30px;width:40px;border-style:solid;" onclick="searchAccount()"><span class="mif-search"></span></div>
</div>
<div style="display:inline-block;width:100%;">
    <div style="width:100%;float:left;margin-top:-3px;">
        @(Html.Kendo().Grid<iFMIS_BMS.BusinessLayer.Models.WFPrepare>()
        .Name("WFPApprovedGrid")
        .HtmlAttributes(new { style = "" })
        .Scrollable()
        .Columns(col =>
        {
        col.Template(@<text></text>)
                @*.Hidden()*@
                .HeaderTemplate(@<text>No.</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:center;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                @*.HeaderHtmlAttributes(new { style = "text-align:center; vertical-align: middle; overflow: visible; white-space: normal"})*@
                .ClientTemplate("<div>#=wfpid# </div>");
        col.Template(@<text></text>)
            .ClientTemplate("<input id='check#=wfpid#' type='checkbox' style='zoom:1.2'  title='Tick the box to include the item in the review!'  class='checkbox'/>")
            .Title("<input onclick=CheckAll(this) type='checkbox' title='Tick all the boxes!' class='checkbox'/> <span style='text - align:center; vertical - align:middle; height: 30px; background - color:#ff6a00;font-size:14px;color:beige;font-weight:100;'></span> ")
            .Width(32)
            //.Hidden()
            //.HeaderTemplate(@<text>For Review</text>)
            .HtmlAttributes(new { style = "text-align:center;height:30px" })
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" });
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Account</text>)
                //.Width(280)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=accountname# </div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Activity</text>)
                .Width(280)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=activityname# </div>");
        col.Bound(c => c.subppaname)
                .HeaderTemplate(@<text>Sub-PPA</text>)
                .Width(200)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=subppaname# </div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Specific Activity</text>)
                .Width(150)
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=specificactivity# </div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Item Name</text>)
                .Width(180)
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=particular# </div>")
                .ClientFooterTemplate("<div style='text-align:center;color:darkgreen;font-size:10px'><label> </label><label> Total</label></div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Unit</text>)
                .Width(50)
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=unit# </div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Weight</text>)
        .Hidden()
        .HtmlAttributes(new { style = "text-align:center;" })
        .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
        .ClientTemplate("<div>#=weight# </div>");

        col.Template(@<text></text>)
        .HeaderTemplate(@<text>Total <br />Qty</text>)
        .Width(50)
        .HtmlAttributes(new { style = "text-align:center;height:30px" })
        .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
        .ClientTemplate("<div>#=kendo.toString(totalqty,'c2')# </div>");

        col.Bound(c => c.noofdays)
        .HeaderTemplate(@<text>No. of <br />Days</text>)
        .Width(100)
        .Hidden()
        .HtmlAttributes(new { style = "text-align:right;height:30px" })
        .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
        .ClientTemplate("<div>#=kendo.toString(noofdays,'c2')# </div>");

        col.Template(@<text></text>)
        .HeaderTemplate(@<text>Amount</text>)
         .Width(70)
        .HtmlAttributes(new { style = "text-align:right;height:30px" })
        .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
        .ClientTemplate("<div>#=kendo.toString(amount,'c2')# </div>");
    col.Bound(c => c.totalamount)
        .HeaderTemplate(@<text>Total <br />Amount</text>)
                .Width(100)
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=kendo.toString(totalamount,'c2')# </div>")
                .ClientFooterTemplate("<div style='text-align:right;color:darkgreen;font-size:10px'><label> </label><label> ₱#=kendo.toString(sum, 'c2')#</label></div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Date/Time Submitted</text>)
                .Width(170)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:center;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=datetimeentered# </div>");
        col.Bound(c => c.officeid)
                //  .HeaderTemplate(@<text>first month rel</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=kendo.toString(officeid,'c2')# </div>");
        col.Bound(c => c.programid)
                // .HeaderTemplate(@<text>second month rel</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=kendo.toString(programid,'c2')# </div>");
        col.Bound(c => c.accountid)
                //   .HeaderTemplate(@<text>third month rel</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=kendo.toString(accountid,'c2')# </div>");
        col.Bound(c => c.activityid)
                //  .HeaderTemplate(@<text>transaction no.</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=activityid#</div>");
        col.Bound(c => c.m1)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m1#</div>");
        col.Bound(c => c.m2)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m2#</div>");
        col.Bound(c => c.m3)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m3#</div>");
        col.Bound(c => c.m4)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m4#</div>");
        col.Bound(c => c.m5)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m5#</div>");
        col.Bound(c => c.m6)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m6#</div>");
        col.Bound(c => c.m7)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m7#</div>");
        col.Bound(c => c.m8)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m8#</div>");
        col.Bound(c => c.m9)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m9#</div>");
        col.Bound(c => c.m10)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m10#</div>");
        col.Bound(c => c.m11)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m11#</div>");
        col.Bound(c => c.m12)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:right;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=m12#</div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=physicaltarget# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=devtindicator# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=description# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=isPPMP# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=responsibleperson# </div>");
        @*col.Template(@<text></text>)
            .HeaderTemplate(@<text></text>)
            .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
            .ClientTemplate(
                "<div class='k-button k-button-icontext' id='deleteid#=wfpid#' style='border-radius:50px;color:\\#ffffff;background-color:\\#DE5555;' onclick='deletewfp(#=wfpid#)'><span class='fa fa-trash' style='font-size: 10pt;margin: 1px;margin-top: -1px;margin-left: 5px;margin-right: 3px;'> </span>Delete</div> ")
            .HtmlAttributes(new { style = "vertical-align: top;" })
            .Width(108);*@
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=subppaid# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=nonofficeid# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=nonofficeidparent# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=kpmid# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=fundreqid# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=breakdownid# </div>");
        col.Template(@<text></text>)
                .HeaderTemplate(@<text>Sub-PPA</text>)
                .Width(180)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;font-size:12px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:20px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=account_parent# </div>");
        col.Bound(c=> c.remarks)
                .HeaderTemplate(@<text>Remarks</text>)
                .Width(150)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" });
        //.ClientTemplate("<div>#=remarks# </div>");
        col.Bound(c => c.prepareuser)
                .HeaderTemplate(@<text>Proponent <br />Office</text>)
                .Width(150)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=prepareuser# </div>");
        
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=completiondate# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=firstqtr# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=secondqtr# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=thirdqtr# </div>");
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=fourthqtr# </div>");    
        col.Template(@<text></text>)
                    .HeaderTemplate(@<text></text>)
                    .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                    .ClientTemplate(
                        "<div id='returnid#=wfpid#' style='border-radius:50px;' onclick='returnapprovewfp(#=wfpid#,#=isPPMP#)'><span class='fa fa-undo' title='Click to return item!' style='font-size: 12pt;margin: 1px;margin-top: -1px;margin-left: 5px;color:red;margin-right: 3px;cursor:pointer'> </span></div> ")
                    .HtmlAttributes(new { style = "vertical-align: top;" })
                    .Width(40);
        col.Template(@<text></text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:left;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=withad# </div>");
        })
         .ToolBar(toolbar =>
         {
             toolbar.Custom().Text("<span style='float:left;margin-left:0px;'></span> Account Breakdown").HtmlAttributes(new { style = "float:left;margin-left:0px;background-color:#54625E;color:white;border-color:#54625E;font-style:italic" });
             toolbar.Custom().Text("<span class='fa fa-regular-eye'></span> Show Supplemental").Name("btnSupplemental").Url("javascript:void(0)").HtmlAttributes(new { onclick = "btnsupplemental()", id = "btnsupplemental_id" });
             toolbar.Custom().Text("<span class='fa fa-regular-eye'></span> Show Details").Name("btnApprove").Url("javascript:void(0)").HtmlAttributes(new { onclick = "btndetails()", id = "btndetails_id" });
             toolbar.Custom().Text("<span id='spanthumbsup' class='fa fa-thumbs-o-up'> </span><span id='SpanOnApproveProgress' style='display:none' class='fa fa-spinner fa-spin'></span> Set As Reviewed").Name("btnApprove").Url("javascript:void(0)").HtmlAttributes(new { onclick = "btnApprove()" });
             // toolbar.Save();
         })
            .Editable(editable => editable.Mode(GridEditMode.InCell))
            .Resizable(e => e.Columns(true))

            .Pageable(pageable => pageable
            .Refresh(true)
            .ButtonCount(5))
            .Selectable()
            .Events(e => e.DataBound("onDataBound").Change("WFPgrid").Edit("onGridApproveEdit"))
            .DataSource(dataSource => dataSource
            .Ajax()
            .Batch(true)
            .Model(m => m.Id(i => i.wfpid))
            .ServerOperation(false)

            .Aggregates(a =>
            {
                a.Add(c => c.totalamount).Sum();
            })
            .PageSize(5000)
            .Read(read => read.Action("GetWFPPrepare", "Report").Data("getParam"))
            )
)
    </div>
</div>
@*<div style="background-color:#54625E;margin-top:-5px;padding-top:5px;padding-bottom:5px">
    <span style="font-weight:bold;color:white;margin-left:5px">LEGEND : </span> <span style="color:yellow;margin-right:10px"> YELLOW -> PPMP</span>
</div>*@
<div style="background-color:#54625E;margin-top:-5px;padding-top:5px;padding-bottom:5px">
    @*<span style="font-weight:bold;color:white;margin-left:5px">LEGEND : </span> <span style="color:yellow;margin-right:10px"> YELLOW -> PPMP</span> <span style="color:white"> / </span> <span style="color:cyan;margin-right:10px"> CYAN -> SUB-PPA</span>*@
    <span style="font-weight:bold;color:white;margin-left:5px">LEGEND : </span> <span style="color:yellow;margin-right:10px"> YELLOW : PPMP</span><span style="color:white"> / </span> <span style="color:cyan;margin-right:10px"> CYAN : PPMP w/ SUB-PPA</span><span style="color:white"> / </span> <span style="color:lightgreen;margin-right:10px"> LIGHT GREEN : Not PPMP w/ SUB-PPA</span><span style="color:white"> / </span>
    <span style="color:white;margin-right:10px"> WHITE : Not PPMP</span><span style="color:orange;margin-right:10px">/ ORANGE: SUPPLEMENTAL</span><span style="color:lightblue;margin-right:10px">/ LIGHT BLUE: Not PPMP w/ ACTIVITY DESIGN</span> <span style="color:beige;margin-right:10px">/ BEIGE: PPMP w/ ACTIVITY DESIGN</span>
</div>
<div>
    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
        Activities <span id="activity_reqid" style="color:red">*</span>
    </label>
    <div style="margin-left:10px;width:500px;margin-top:0px;">
        @(Html.Kendo().ComboBox()
    .Name("activity")
    .DataTextField("initiative")
    .DataValueField("initiative_id")
    .AutoBind(true)
    .Placeholder("Select activity!")
    .Filter("contains")
    .MinLength(3)
    //     .Events(e => e.Change("fnOffice_sel"))
    .SelectedIndex(0)
    .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetOfficeActivity", "Report").Data("fnactivity");
        })
    .ServerFiltering(false);
    })
        )
    </div>
    <div style="float:left;margin-top:-30px;margin-left:510px">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 65px;background-color:cornflowerblue;color:white; margin-bottom:0px;border-radius:50px;" onclick="reqprintwfp()"><span class="fa fa-print"></span> WFP</div>
    </div>
    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
        Project Component & Specific Activities @*Sub-Activities @*<span style="color:red">*</span>*@
    </label>
    <div style="margin-left:10px;width:500px;margin-top:0px;">
        @(Html.Kendo().ComboBox()
    .Name("activity_sub")
    .DataTextField("initiative")
    .DataValueField("initiative_id")
    .AutoBind(true)
    .Placeholder("Select specific activity!")
    .Filter("contains")
    .MinLength(3)
    //     .Events(e => e.Change("fnOffice_sel"))
    .SelectedIndex(0)
    .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("GetOfficeActivity_Sub", "Report").Data("fnactivity_specific");
        })
    .ServerFiltering(false);
    })
        )
    </div>
    <div style="float:left;margin-top:-30px;margin-left:510px">
        <div class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 85px;background-color:cornflowerblue;color:white; margin-bottom:0px;border-radius:50px;" onclick="reqprintwfp_spec()"><span class="fa fa-print"></span> Preview</div>
    </div>
    <div style="display:inline-block;">
        <div style="border-style:solid;border-width:1px;width:750px;border-color:darkgray;margin-left:10px;margin-top:10px;margin-bottom:0px;height:165px;">
            <label style="display:inline-block;border-style:solid;border-width:1px;border-color:darkgray;background-color:lightgray;width:100%;height:30px;vertical-align:middle">
                <span style="margin-left:6px;float:left;margin-top:5px;font-size:16px;">Sub-PPA</span><span style="color:red"> *</span>
            </label>
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Group Under
            </label>
            <div style="margin-left:10px;width:479px;margin-top:0px;">
                @(Html.Kendo().ComboBox()
                .Name("groupactivity")
                .DataTextField("accountname")
                .DataValueField("accountnameid")
                .AutoBind(true)
                .Placeholder("Select sub-ppa!")
                .Filter("contains")
                .MinLength(3)
                .Events(e => e.Change("fnMainaccount"))
                .SelectedIndex(0)
                .HtmlAttributes(new { style = "width:100%; height:100%", @class = "form-control autoselect" })
                .DataSource(source =>
                {
                    source.Read(read =>
                    {
                        read.Action("GetNOAccountWFP", "Report").Data("fngroupactivity");
                    })
                .ServerFiltering(false);
                })
                )
            </div>
            <div style="float:right;margin-right:241px;margin-top:-30px">
                <input type="checkbox" value="0" id="reviewpersub" onclick="tick_reviewpersub()" style="zoom:1.2" title="Tick checkbox to review the wfp per sub-ppa!"/>
            </div>
            <script>
                function tick_reviewpersub() {
                    if (document.getElementById("reviewpersub").checked) {
                        $("#reviewpersub").val(1)
                    }
                    else {
                        $("#reviewpersub").val(0)
                    }
                }
            </script>
            <div style="display:inline-block" id="div_subppaid">
                <div style="display:inline-block">
                    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                        Appropriation
                    </label> <br />
                    <input id="MainAppropriation" name="MainAppropriation" type="text" value="0.00" readonly style="width:139px;height:100%;color:#050afc;margin-left:10px" class="form-control">
                </div>
                <div style="display:inline-block">
                    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                        Total Amount (less)
                    </label> <br />
                    <input id="SubAppropriation" name="SubAppropriation" type="text" value="0.00" readonly style="width:139px;height:100%;color:#ff0000;margin-left:10px" class="form-control">
                </div>
                <div style="display:inline-block">
                    <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                        Balance
                    </label> <br />
                    <input id="BalAppropriation" name="BalAppropriation" type="text" value="0.00" readonly style="width:139px;height:100%;color:green;margin-left:10px" class="form-control">
                </div>
            </div>
        </div>
    </div>
        <label style="display:none;margin-left:10px;margin-top:10px;">
            Project Component & Specific Activities
        </label>
        <div style="display:none;margin-left:10px;width:500px;margin-top:0px;">
            <div style="margin-left:0px;">
                <textarea id="specificactivity" placeholder="Enter Specific Activity" style="width:487.5px"></textarea>
            </div>
        </div>
        <div style="float:right;margin-right:230px;margin-top:15px; display:none">
            <input type="checkbox" id="includeppa" style="zoom:1.2" value="0" onclick="fnincludeppa()" />
        </div>
        <div style="float:right;margin-right:160px;margin-top:-36px; display:none">
            <label style="font-size:12px" id="lblforsubppaid" onclick="fnincludeppalbl()"> For Sub-PPA</label>
        </div>
        <br />
        <label style="display:inline-block;margin-left:10px;margin-top:10px;">
            Item Name <span style="color:red">*</span>
        </label>
        <div style="margin-left:10px;">
            <textarea id="itemname" readonly placeholder="Enter Item Name" style="width:487.5px"></textarea>
        </div>

        <label style="display:inline-block;margin-left:10px;margin-top:10px;">
            Description
        </label>
        <div style="margin-left:10px;">
            <textarea id="description" placeholder="Enter Description" style="width:487.5px;height:25px"></textarea>
        </div>
        <div style="float:left;margin-left:515px;margin-top:-68px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Unit <span style="color:red">*</span>
            </label>
            <div style="margin-left:10px;">
                <input id="unit" readonly type="text" style="width:100px;height:24px;" />
            </div>
        </div>
        <label style="display:none; float:left;margin-left:250px;margin-top:-50px;">
            Weight(%) <span style="color:red">*</span>
        </label>
        <div style="display:none; float:left;margin-left:250px;margin-top:-28px">
            <input id="weight" type="text" style="width:100px" />
        </div>
    </div>
    <div>
        <div style="background-color:#ffd800;color:black;margin-left:10px;text-align:left;margin-top:10px;height:30px;vertical-align:middle;width:752.7px">
            <label style="margin-left:10px;float:left;margin-top:5px;">
                Monthly Quantity/ Amount
            </label>
        </div>
        <div style="border-style:solid;height:135px;border-width:1px;margin-left:10px;width:750px;border-color:#ffd800">
            <div style="display:inline-block;margin-left:-3px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    January <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="jan" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    February <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="feb" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    March <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="mar" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    April <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="apr" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    May <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="may" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    June <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="jun" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <br />
            <div style="display:inline-block;margin-left:-3px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    July <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="jul" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    August <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="aug" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    September <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="sep" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    October <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="oct" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    November <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="nov" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
            <div style="display:inline-block;margin-left:0px">
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    December <span style="color:red">*</span>
                </label>
                <div style="margin-left:10px;">
                    <input id="dec" type="number" min="0" value="0" onkeyup="sync()" onclick="sync()" style="width:100px" />
                </div>
            </div>
        </div>
    </div>
    <div style="display:inline-block">
        <div style="display:inline-block;margin-left:5px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Total Quantity
            </label>
            <div style="margin-left:10px;">
                <input id="totqty" type="text" min="0" value="0" readonly style="width:100px" />
            </div>
        </div>
        
        <div style="display:inline-block;margin-left:5px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Amount <span style="color:red">*</span>
            </label>
            <div style="margin-left:10px;">
                <input id="amount" type="number" min="0" value="0.00" onkeyup="sync2()" onclick="sync2()" style="width:100px" />
            </div>
        </div>
        <div style="display:none;margin-left:5px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                No. of Days <span style="color:red">*</span>
            </label>
            <div style="margin-left:10px;">
                <input id="nodays" type="number" min="1" value="1" onkeyup="sync2()" onclick="sync2()" style="width:100px" />
            </div>
        </div>
        <div style="display:inline-block;margin-left:5px">
            <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                Total Amount
            </label>
            <div style="margin-left:10px;">
                <input id="totamount" type="text" min="0" value="0.00" readonly style="width:100px" />
            </div>
        </div>
    </div>
    <div style="display:inline-block">
        <div style="background-color:indianred;color:white;margin-left:10px;text-align:left;margin-top:10px;height:30px;vertical-align:middle;width:497.5px">
            <label style="margin-left:10px;float:left;margin-top:5px;">
                Output Indicator/Responsible Person
            </label>
        </div>
        <div style="border-style:solid;height:411px;border-width:1px;margin-left:10px;width:495px;border-color:indianred">
            <div style="display:inline-block;margin-left:5px">
                <label style="display:none;margin-left:10px;margin-top:10px;">
                    Physical Target
                </label>
                <div style="margin-left:10px;display:none">
                    <input id="ptarget" type="text" style="width:450px;height:25px" />
                </div>
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    Output Indicator
                </label>
                <div style="margin-left:10px;">
                    <textarea id="indicator" type="text" style="width:450px;height:50px"> </textarea>
                </div>
                <label style="display:inline-block;margin-left:10px;margin-top:10px;">
                    @*Responsible Office/Person*@
                    Responsible ( <input type="radio" checked value="1" style="width:10px;zoom:1.2" id="responoffice" onclick="responoffice()" /><span style="width:30px"> Office</span>/ <input type="radio" style="width:10px;zoom:1.2" id="responperson" onclick="responperson()"> Person )
                </label>
                <div style="margin-left:10px;">
                    @(Html.Kendo().ComboBox()
                    .Name("resperson")
                    .DataTextField("EmpNameFull")
                    .DataValueField("eid")
                    .SelectedIndex(-1)
                    .Filter("contains")
                    .MinLength(3)
                    .HtmlAttributes(new { style = "width:462px; height:100%;visible=false", @class = "form-control autoselect" })
                    .DataSource(source => source.Read(read => read.Action("GetEmployeePerOffice", "Report")))
                    )

                    @(Html.Kendo().Grid<iFMIS_BMS.BusinessLayer.Models.WFPrepare>()
                .Name("grid_responsible_person")
                .HtmlAttributes(new { style = "" })
                .Scrollable()
                .Columns(col =>
                {
                    col.Template(@<text></text>)
                .Hidden()
                .HeaderTemplate(@<text>Office ID</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:center;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:15px;background-color:#ff6a00;font-size:10px;color:beige;" })
                @*.HeaderHtmlAttributes(new { style = "text-align:center; vertical-align: middle; overflow: visible; white-space: normal"})*@
                .ClientTemplate("<div>#=officeid# </div>");

                    @*col.Template(@<text></text>)*@
                    col.Bound(c => c.officeabbr)
                        .HeaderTemplate(@<text>Office</text>)
                .Width(50)
                .HtmlAttributes(new { style = "text-align:center;font-size:12px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:15px;background-color:#ff6a00;font-size:14px;color:beige;" })
                .ClientTemplate("<div>#=officeabbr# </div>");

                    col.Template(@<text></text>)
                .Hidden()
                .HeaderTemplate(@<text>Actioncode</text>)
                .Hidden()
                .HtmlAttributes(new { style = "text-align:center;" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:15px;background-color:#ff6a00;font-size:10px;color:beige;" })
                @*.HeaderHtmlAttributes(new { style = "text-align:center; vertical-align: middle; overflow: visible; white-space: normal"})*@
                .ClientTemplate("<div>#=actioncode# </div>");

                    col.Template(@<text></text>)
                .ClientTemplate("<input id='check#=officeid#' onclick=Check_click(this,#=officeid#) title='Tick the box to add as responsible office/person!' style='zoom:1.2' type='checkbox'  class='checkbox'/>")
                .Title("<input type='checkbox' checked  class='checkbox' readonly  style='zoom:1.5'/> <span style='text - align:center; vertical - align:middle; height: 30px; background - color:#ff6a00;font-size:14px;color:beige;font-weight:100;'></span> ")
                .Width(30)
                //  .HeaderTemplate(@<text>For Review</text>)#=officeid#
                .HtmlAttributes(new { style = "text-align:center;height:30px" })
                .HeaderHtmlAttributes(new { style = "text-align:center;vertical-align:middle;height:30px;background-color:#ff6a00;font-size:14px;color:beige;" });
                })
                //.Editable(editable => editable.Mode(GridEditMode.InCell))
                .Resizable(e => e.Columns(true))
                .Pageable(pageable => pageable
                .Refresh(true)
                .ButtonCount(5))
                .HtmlAttributes(new { @class = "table-responsive", style = "height:250px;width:459px;margin-top:-30px" })
                .Selectable()
                .Events(e => e.DataBound("onDataBoundResperson"))
                .DataSource(dataSource => dataSource
                .Ajax()
                .Batch(true)
                .Model(m => m.Id(i => i.locationid))
                .ServerOperation(false)
                .PageSize(50)
                .Read(read => read.Action("GetReponsibleOffice", "Report").Data("getresofficepar"))
                )
                    )
                </div>
            </div>
        </div>
    </div>
<br />
<div style="border-color:gray;border-width:1px;border-style:solid;width:650px;margin-top:8px;float:left;margin-left:10px">
    <div style="background-color:lightgray;border-color:lightgray;margin-left:0px;text-align:left;margin-top:0px;height:30px;vertical-align:middle;width:650px;margin-bottom:5px">
        <label style="margin-left:10px;float:left;margin-top:5px;">
            Physical Target
        </label>
    </div>
    <div style="display:inline-block;margin-left:10px;margin-bottom:5px;">
        <label style="display:inline-block">
            First Quarter <span style="color:red;font-weight:bold">*</span>
        </label>
        <br />
        <div style="display:inline-block;margin-left:-1px">
            <textarea class="k-input" id="1qtr" name="1qtr" type="text" style="width:150px;"> </textarea>
        </div>
    </div>
    <div style="display:inline-block;margin-left:5px">

        <label style="display:inline-block">
            Second Quarter <span style="color:red;font-weight:bold">*</span>
        </label>
        <br />
        <div style="display:inline-block;margin-left:-1px">
            <textarea class="k-input" id="2qtr" name="2qtr" type="text" style="width:150px;"> </textarea>
        </div>
    </div>
    <div style="display:inline-block;margin-left:5px">
        <label style="display:inline-block">
            Third Quarter <span style="color:red;font-weight:bold">*</span>
        </label>
        <br />
        <div style="display:inline-block;margin-left:-1px">
            <textarea class="k-input" id="3qtr" name="3qtr" type="text" style="width:150px;"></textarea>
        </div>
    </div>
    <div style="display:inline-block;margin-left:5px">
        <label style="display:inline-block">
            Fourth Quarter <span style="color:red;font-weight:bold">*</span>
        </label>
        <br />
        <div style="display:inline-block;margin-left:-1px">
            <textarea class="k-input" id="4qtr" name="4qtr" type="text" style="width:150px;"></textarea>
        </div>
    </div>
</div>
<br />
    <div style="display:inline-block;margin-left:10px;margin-top:5px;">
        <label style="display:inline-block">
            Date of Completion
        </label>
        <br />
        <div style="display:inline-block">
            <input id="datepicker" title="datepicker" style="width: 140.5px; float: left; margin-left: 0px;" />
        </div>
    </div>
    <div style="display:inline-block;margin-left:10px;width:740px;margin-top:15px;margin-bottom:15px;background-color:#bdbcbc;height:50px">
        <div id="btnClear" class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 100px;margin-left:265px;float:left; margin-top: 10px; border-radius:50px;margin-bottom:0px" onclick="reqClear()"><span class=""></span> Clear</div>
        <div id="btnSave" class="k-button k-button-icontext" style="bottom: 15px; right: 25px;width: 100px;float:left; margin-top: -28px; margin-left:375px;border-radius:50px;background-color:cornflowerblue;color:white; margin-bottom:0px" onclick="reqSave()"><span class="fa fa-save"></span> Save</div>
    </div>
    <div style="display:none">
        <input type="number" value="0" id="wfpid" />
        <input id="mainAccountUsed" name="mainAccountUsed" type="number" />
        <input type="number" id="nonofficeidparent_temp" value="0" />
        <input type="number" id="appBalTemp" value="0" />
        <input type="number" id="amountTemp" value="0" />
        <input type="number" value="0" id="isPPMPTag" />
        <input type="text" value="" id="fund" />
        <input type="number" value="0" id="kpmid" />
        <input type="number" value="0" id="fundreqid" />
        <input type="number" value="0" id="breakdownid" />
        <input type="number" value="0" id="review_tmp" />
        <input type="number" value="0" id="specid" />
        <input type="number" value="0" id="showsupplemental" />
    </div>
    <script>
        $(document).ready(function () {
            $("#wfpconsol").data("kendoGrid").dataSource.read()
            $("#ooeclass").data("kendoDropDownList").value("")

            $("#datepicker").kendoDatePicker();
            $("#datepicker").val(new Date().toLocaleDateString());
            $("#grid_responsible_person").data("kendoGrid").dataSource.read();
            $("#showsupplemental").val(0)

            var url = "@Url.Action("getusertf", "Report")";
            $.get(url,function(e){
                if (e == 1){
                    $("#div_gfid").hide();
                    document.getElementById("div_gfid").style = "display:none"
                    tflblid_click()
                }
                else{
                    $("#div_gfid").show();
                    document.getElementById("div_gfid").style = "display:inline-block"

                }
            })
            
        })

        function supplemetalapp() {
            if (document.getElementById("supplemetalapp").checked) {
                $("#supplemetalapp").val(1)
            }
            else {
                $("#supplemetalapp").val(0)
            }
            fnaccount_sel()
        }
        function lblsupplemetalapp() {
            if (document.getElementById("supplemetalapp").checked) {
                $("#supplemetalapp").prop("checked", false)
                $("#supplemetalapp").val(0)
            }
            else {
                $("#supplemetalapp").prop("checked", true)
                $("#supplemetalapp").val(1)
            }
            fnaccount_sel()
        }
        function gfid_click() {
            document.getElementById("gfid").value = "1"
            document.getElementById("tfid").value = "0"
            $("#tfid").prop("checked", false)
            $("#wfpconsol").data("kendoGrid").dataSource.read()
            $("#office").data("kendoComboBox").value("")
            $("#ooe").data("kendoComboBox").value("")
            $("#ooeclass").data("kendoDropDownList").value("")
            $("#account").data("kendoComboBox").value("")
            $("#office").data("kendoComboBox").dataSource.read()
            $("#program_reqid").show()
            $("#ooe_reqid").show()
            $("#activity_reqid").show()
            $("#includeppa").show()
            $("#lblforsubppaid").show()
            $("#gftransid").show()
        }
        function tfid_click() {
            document.getElementById("gfid").value = "0"
            document.getElementById("tfid").value = "1"
            $("#gfid").prop("checked", false)
            $("#wfpconsol").data("kendoGrid").dataSource.read()
            $("#office").data("kendoComboBox").value("")
            $("#ooe").data("kendoComboBox").value("")
            $("#ooeclass").data("kendoDropDownList").value("")
            $("#account").data("kendoComboBox").value("")
            $("#office").data("kendoComboBox").dataSource.read()
            $("#program_reqid").hide()
            $("#ooe_reqid").hide()
            $("#activity_reqid").hide()
            $("#includeppa").hide()
            $("#lblforsubppaid").hide()
            $("#gftransid").hide()
        }

        function gflblid_click() {
            gfid_click()
            $("#gfid").prop("checked", true)
        }
        function tflblid_click() {
            tfid_click()
            $("#tfid").prop("checked", true)
        }

        function gf_current_id_click() {
            document.getElementById("gf_currentid").value = "1";
            document.getElementById("gf_excessid").value = "0";
            $("#gf_excessid").prop("checked", false)
            fnOffice_sel()
            $("#ooe").data("kendoComboBox").value("")
            $("#account").data("kendoComboBox").value("")
            $("#program_reqid").show()
            $("#ooe_reqid").show()
            $("#activity_reqid").show()
            $("#includeppa").hide()
            $("#lblforsubppaid").hide()
            $("#wfpconsol").data("kendoGrid").dataSource.read()
        }
        function gf_excess_id_click() {

            document.getElementById("gf_currentid").value = "0";
            document.getElementById("gf_excessid").value = "1";
            $("#gf_currentid").prop("checked", false)
            fnOffice_sel()
            $("#ooe").data("kendoComboBox").value("")
            $("#account").data("kendoComboBox").value("")
            $("#program_reqid").hide()
            $("#ooe_reqid").hide()
            $("#activity_reqid").hide()
            $("#includeppa").hide()
            $("#lblforsubppaid").hide()
            $("#wfpconsol").data("kendoGrid").dataSource.read()

        }
        function gf_current_lblid_click() {
            gf_current_id_click()
            $("#gf_currentid").prop("checked", true)
        }
        function gf_excess_lblid_click() {
            gf_excess_id_click()
            $("#gf_excessid").prop("checked", true)
        }

        function reqprintwfp(){
            var activityid= $("#activity").val();
            if (activityid == 0 || activityid.length <3){
                swal("Warning","Please select an activity!","warning")
            }
            else{
                var officeid = $("#office").val();
                var officename = $("#office").data("kendoComboBox").text()
                var programID = $("#ooe").val();
                var yearof = $("#wfpyear").val();
                var repHistory = 0;//$("#repHistory").val();
                var prepby = $("#prepby").val();
                var prepwfp= $("#prepwfp").val() == 1 ? 1: 0;
                var submitwfp = $("#submitwfp").val() == 1? 2:0;
                var approvewfp = $("#approvewfp").val() == 1 ? 3 : 0;
                var printstatus =  $("#review_tmp").val() == 1? 3 : 2;//Number(prepwfp) + Number(submitwfp) + Number(approvewfp)
                var projectaip = 0//$("#projectaip").val()
                var fundsource = ""//$("#fundsource").data("kendoDropDownList").text()
                var accountid = $("#account").val();
                var accountname = $("#account").data("kendoComboBox").text()
                var municipal = "";//$("#municipal").data("kendoDropDownList").text()
                var barangay = "";// $("#barangay").data("kendoDropDownList").text()
                var ooeclass = $("#ooeclass").data("kendoDropDownList").text()
                var pgas_loc = $("#pgas_loc").val() == 1 ? 1 : 0;
                var fundid = $("#gfid").val() == 1 ? 0 : 1
                var mode_trans = $("#gf_currentid").val()
                var issupplemetal = $("#supplemetalapp").val();
                if ((accountid == 0 || accountid.length > 6) && repHistory == 0) {
                    swal("Warning", "Please select an account from the dropdown list!", "warning")
                }
                    //else if (repHistory != 0) {
                    //    swal("", "Report history is not yet available as of this time.", "info")
                    //}
                else {
                   // if (repHistory == 0) {
                        $.ajax({
                            async: false,
                            dataType: 'html',
                            success: window.open("../Reports/ReportViewer.aspx?rid=37&OfficeID=" + officeid + "&year=" + yearof + "&OfficeName=" + officename + "&prepby=" + prepby + "&fundsource=1&ProjectName=&funddescription=&repHistory=" + repHistory + "&printstatus=" + printstatus + "&projectaip=" + projectaip + "&fundsourcename=" + fundsource + "&accountID=" + accountid + "&accountname=" + accountname + "&municipal=" + municipal + "&barangay=" + barangay + "&ooeclass=" + ooeclass + "&pgas_loc=" + pgas_loc + "&programID=" + programID + "&activityid=" + activityid + "&fundid=" + fundid + "&mode_trans=" + mode_trans + "&issupplemetalid=" + issupplemetal + "")

                        });
                      //  $("#repHistory").data("kendoComboBox").dataSource.read();
                   // }
                    @*else {

                        var url = "@Url.Action("getdocid", "Report")";
                        $.get(url, { docname: reportpdf }, function (e) {
                            $.ajax({
                                async: false,
                                dataType: 'html',
                                //success: window.open("https://pgas.ph/bmsattachment/" + reportpdf)
                                success: window.open("https://pgas.ph/dgsign/blank/getPDF_View?pdfData=application/pdf&FormID="+ e )

                            });
                        })
                    }*@
                }
            }
        }

        function reqprintwfp_spec() {
            var activityid = $("#activity").val();
            var specid = $("#activity_sub").val();

            if (activityid == 0 || activityid.length <3){
                swal("Warning","Please select an activity!","warning")
            }
            else{
                var officeid = $("#office").val();
                var officename = $("#office").data("kendoComboBox").text()
                var programID = $("#ooe").val();
                var yearof = $("#wfpyear").val();
                var repHistory = 0;//$("#repHistory").val();
                var prepby = $("#prepby").val();
                var prepwfp= $("#prepwfp").val() == 1 ? 1: 0;
                var submitwfp = $("#submitwfp").val() == 1? 2:0;
                var approvewfp = $("#approvewfp").val() == 1 ? 3 : 0;
                var printstatus =  $("#review_tmp").val() == 1? 3 : 2;//Number(prepwfp) + Number(submitwfp) + Number(approvewfp)
                var projectaip = 0//$("#projectaip").val()
                var fundsource = ""//$("#fundsource").data("kendoDropDownList").text()
                var accountid = $("#account").val();
                var accountname = $("#account").data("kendoComboBox").text()
                var municipal = "";//$("#municipal").data("kendoDropDownList").text()
                var barangay = "";// $("#barangay").data("kendoDropDownList").text()
                var ooeclass = $("#ooeclass").data("kendoDropDownList").text()
                var pgas_loc = $("#pgas_loc").val() == 1 ? 1 : 0;
                var fundid = $("#gfid").val() == 1 ? 0 : 1
                var mode_trans = $("#gf_currentid").val()
                var issupplemetal = $("#supplemetalapp").val();
                if ((accountid == 0 || accountid.length > 6) && repHistory == 0) {
                    swal("Warning", "Please select an account from the dropdown list!", "warning")
                }
                    //else if (repHistory != 0) {
                    //    swal("", "Report history is not yet available as of this time.", "info")
                    //}
                else {
                    // if (repHistory == 0) {
                    $.ajax({
                        async: false,
                        dataType: 'html',
                        success: window.open("../Reports/ReportViewer.aspx?rid=37&OfficeID=" + officeid + "&year=" + yearof + "&OfficeName=" + officename + "&prepby=" + prepby + "&fundsource=1&ProjectName=&funddescription=&repHistory=" + repHistory + "&printstatus=" + printstatus + "&projectaip=" + projectaip + "&fundsourcename=" + fundsource + "&accountID=" + accountid + "&accountname=" + accountname + "&municipal=" + municipal + "&barangay=" + barangay + "&ooeclass=" + ooeclass + "&pgas_loc=" + pgas_loc + "&programID=" + programID + "&activityid=" + activityid + "&fundid=" + fundid + "&mode_trans=" + mode_trans + "&specid=" + specid + "&issupplemetalid=" + issupplemetal + "")

                    });
                    //  $("#repHistory").data("kendoComboBox").dataSource.read();
                    // }
                    @*else {

                        var url = "@Url.Action("getdocid", "Report")";
                    $.get(url, { docname: reportpdf }, function (e) {
                        $.ajax({
                            async: false,
                            dataType: 'html',
                            //success: window.open("https://pgas.ph/bmsattachment/" + reportpdf)
                            success: window.open("https://pgas.ph/dgsign/blank/getPDF_View?pdfData=application/pdf&FormID="+ e )

                        });
                    })
                }*@
                }
        }
        }

        function responoffice() {
            var grid = $("#grid_responsible_person").data("kendoGrid");
            $("#responoffice").val(1)
            $("#responperson").val(0)
            $("#responoffice").prop("checked", true)
            $("#responperson").prop("checked", false)
            $("#grid_responsible_person").data("kendoGrid").dataSource.read()
            $("#grid_responsible_person th[data-field=officeabbr]").html("Office")

        }
        function responperson() {
            var grid = $("#grid_responsible_person").data("kendoGrid");
            $("#responoffice").val(0)
            $("#responperson").val(1)
            $("#responperson").prop("checked", true)
            $("#responoffice").prop("checked", false)
            $("#grid_responsible_person").data("kendoGrid").dataSource.read()
            $("#grid_responsible_person th[data-field=officeabbr]").html("Person")
        }
        function reqSave() {
            var year = $("#wfpyear").val()
            var officeid = $("#office").val()
            var programid = $("#ooe").val()
            var accountid = $("#account").val()
            var activity = $("#activity").val()
            var activityspecific = $("#specificactivity").val()
            var itemname = $("#itemname").val()
            var description = $("#description").val()
            var unit = $("#unit").val()
            var weight = $("#weight").val()
            var m1 = $("#jan").val()
            var m2 = $("#feb").val()
            var m3 = $("#mar").val()
            var m4 = $("#apr").val()
            var m5 = $("#may").val()
            var m6 = $("#jun").val()
            var m7 = $("#jul").val()
            var m8 = $("#aug").val()
            var m9 = $("#sep").val()
            var m10 = $("#oct").val()
            var m11 = $("#nov").val()
            var m12 = $("#dec").val()
            var totalqty = $("#totqty").val()
            var amount = $("#amount").val()
            var days = $("#nodays").val()
            var totamount = $("#totamount").val()
            var ptarget = $("#ptarget").val()
            var indicator = $("#indicator").val()
            var resperson = $("#resperson").val()
            var wfpid = $("#wfpid").val()
            var title = "";
            var status = "";
            var includeppa = $("#includeppa").val()
            var isPPMPTag = $("#isPPMPTag").val()
            var MotherAccount = $("#groupactivity").val()
            var nonofficeid_temp = $("#nonofficeid_temp").val()
            var accountnameid = $("#subppaid_temp").val()
            var ooeid = $("#ooeclass").val()
            var kpmid = $("#kpmid").val()
            var fundreqid = $("#fundreqid").val()
            var breakdownid = $("#breakdownid").val()
            var dtecomple = $("#datepicker").val();
            var fund = $("#fund").val()
            var firstqtr = $("#1qtr").val()
            var secondqtr = $("#2qtr").val()
            var thirdqtr = $("#3qtr").val()
            var fourthqtr = $("#4qtr").val()
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var mode_trans = $("#gf_currentid").val()
            if (wfpid != 0) {
                title = "Update WFP?"
                status = "Update"
            }
            else {
                title = "Save WFP?"
                status = "Save"
            }
            //if (officeid == "" || programid == "" || accountid == "" || activity == "" || ooeid == 0 || activity.length < 2 || activity.length > 10 || itemname == "" || unit == "" || totalqty == 0 || amount == 0 || days == 0) {
            if ((officeid == "" || programid == "" || accountid == "" || activity == "" || firstqtr.trim() == "" || secondqtr.trim() == "" || thirdqtr.trim() == "" || fourthqtr.trim() == "" || activity.length < 2 || activity.length > 10 || itemname == "" || itemname.length == 0 || totalqty == 0 || amount == 0 || days == 0) && ooeid != 1 && fundid == 0 && mode_trans == 1) {
                swal("Warning", "Please fill out completely the required fields marked with asterisk(*)!", "warning")
            }
            else if ((officeid == "" || accountid == "" || activityspecific == "" || activityspecific.length < 2 || indicator == "" || indicator.length < 2 || firstqtr.trim == "" || firstqtr.length == 0 || secondqtr.trim == "" || secondqtr.length == 0 || thirdqtr.trim == "" || thirdqtr.length == 0 || fourthqtr.trim == "" || fourthqtr.length == 0 || itemname == "" || itemname.length == 0) && fundid == 1) {
                swal("Warning", "Please fill out completely the required fields marked with asterisk(*)!", "warning")
            }
            else if ((officeid == "" || accountid == "" || activityspecific == "" || activityspecific.length < 2 || indicator == "" || indicator.length < 2 || firstqtr.trim == "" || firstqtr.length == 0 || secondqtr.trim == "" || secondqtr.length == 0 || thirdqtr.trim == "" || thirdqtr.length == 0 || fourthqtr.trim == "" || fourthqtr.length == 0 || itemname == "" || itemname.length == 0) && mode_trans == 0) {
                swal("Warning", "Please fill out completely the required fields marked with asterisk(*)!", "warning")
            }
            else {
                swal({
                    title: title,
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: status,
                    closeOnConfirm: false,
                    showLoaderOnConfirm: true
                },
                function (isConfirm) {

                    if (isConfirm) {
                        var url = "@Url.Action("SaveWFPActual", "Report")";
                        $.get(url, { officeid: officeid, programid: programid, accountid: accountid, activity: activity, activityspecific: activityspecific, itemname: itemname, unit: unit, weight: weight, m1: m1, m2: m2, m3: m3, m4: m4, m5: m5, m6: m6, m7: m7, m8: m8, m9: m9, m10: m10, m11: m11, m12: m12, totalqty: totalqty, amount: amount, days: days, totamount: totamount, ptarget: ptarget, indicator: indicator, resperson: resperson, year: year, wfpid: wfpid, includeppa: includeppa, description: description, isPPMPTag: isPPMPTag, MotherAccount: MotherAccount, fund: fund, kpmid: kpmid, fundreqid: fundreqid, breakdownid: breakdownid, dtecomple: dtecomple, firstqtr: firstqtr, secondqtr: secondqtr, thirdqtr: thirdqtr, fourthqtr: fourthqtr, fundid: fundid, mode_trans: mode_trans }, function (e) {

                            if (e == "success") {
                                if (wfpid != 0) {
                                    swal("Success", "WFP successfully updated!", "success");
                                }
                                else {
                                    swal("Success", "WFP successfully saved!", "success");
                                }
                                reqClearPartial()
                            } else {
                                swal("Error", e, "error");
                            }
                        });
                    }
                });
            }
        }
        function reqPrint() {
            var officeid = $("#office").val();
            var officename = $("#office").data("kendoComboBox").text()
            var programID = $("#ooe").val();
            var yearof = $("#wfpyear").val();
            var repHistory = $("#repHistory").val();
            var prepby = $("#prepby").val();
            var prepwfp = $("#prepwfp").val() == 1 ? 1 : 0;
            var submitwfp = $("#submitwfp").val() == 1 ? 2 : 0;
            var approvewfp = $("#approvewfp").val() == 1 ? 3 : 0;
            var review = $("#review_tmp").val() == 1? 3 : 2;
            var printstatus = Number(prepwfp) + Number(submitwfp) + Number(approvewfp)
            var projectaip = 0//$("#projectaip").val()
            var fundsource = "";//$("#fundsource").data("kendoDropDownList").text()
            var accountid = $("#account").val();
            var accountname = $("#account").data("kendoComboBox").text()
            var ooeclass = $("#ooeclass").data("kendoDropDownList").text()
            var pgas_loc = $("#pgas_loc").val() == 1 ? 1 : 0;
            var activityid = $("#activity").val()
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var mode_trans = $("#gf_currentid").val()
            var issupplemetal = $("#supplemetalapp").val();
          //  var reportpdf = $("#repHistory").data("kendoComboBox").text() + '.pdf';

            if (accountid == 0 || accountid.length > 6) {
                swal("Warning", "Please select an account from the dropdown list!", "warning")
            }
            else {
                $.ajax({
                    async: false,
                    dataType: 'html',
                    success: window.open("../Reports/ReportViewer.aspx?rid=37&OfficeID=" + officeid + "&year=" + yearof + "&OfficeName=" + officename + "&prepby=" + prepby + "&fundsource=1&ProjectName=&funddescription=&repHistory=" + repHistory + "&printstatus=" + review + "&projectaip=" + projectaip + "&fundsourcename=" + fundsource + "&accountID=" + accountid + "&accountname=" + accountname + "&municipal=''&barangay=''&ooeclass=" + ooeclass + "&pgas_loc=" + pgas_loc + "&programID=" + programID + "&activityid=" + activityid + "&fundid=" + fundid + "&mode_trans=" + mode_trans + "&issupplemetalid=" + issupplemetal + "")

                });
                $("#repHistory").data("kendoComboBox").dataSource.read();
            }

        }
        function reqPPMP(id) {
            // swal("","Sorry! PPMP download is not yet available!","warning")
            var transyear = $("#wfpyear").val();
            var officeid = $("#office").val();
            var url = "@Url.Action("DownloadPPMPNew", "Report")";
            @*var url = "@Url.Action("DownloadPPMP", "Report")";*@
            swal({
                title: "System Notice!",
                text: "This will download or copy all prepared PPMP from ePS. Do you want to proceed?",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "Yes",
                closeOnConfirm: false,
                showLoaderOnConfirm: true
            }, function () {
                //var dialog = $(id).data('dialog');
                //dialog.open();
                $.get(url, { officeid: officeid, transyear: transyear }, function (e) {
                    if (e == "success") {
                        //dialog.close();
                        swal("Success!", "PPMP has been successfully downloaded!", "success");
                        $("#WFPDetails").data("kendoGrid").dataSource.read();
                    } else {
                        //   dialog.close();
                        swal("Error!", "Download failed!", "error");
                        $("#WFPDetails").data("kendoGrid").dataSource.read();
                    }
                });
            });
        }
        function WFPgrid() {

            var entityGrid = $("#WFPApprovedGrid").data("kendoGrid");
            var selItem = entityGrid.dataItem(entityGrid.select());
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            $("#activity").data("kendoComboBox").value(selItem.activityid)
            $("#specificactivity").val(selItem.specificactivity)
            $("#itemname").val(selItem.particular)
            $("#unit").val(selItem.unit)
            $("#weight").val(selItem.weight)
            $("#jan").val(selItem.m1)
            $("#feb").val(selItem.m2)
            $("#mar").val(selItem.m3)
            $("#apr").val(selItem.m4)
            $("#may").val(selItem.m5)
            $("#jun").val(selItem.m6)
            $("#jul").val(selItem.m7)
            $("#aug").val(selItem.m8)
            $("#sep").val(selItem.m9)
            $("#oct").val(selItem.m10)
            $("#nov").val(selItem.m11)
            $("#dec").val(selItem.m12)
            $("#totqty").val(selItem.totalqty)
            $("#amount").val(selItem.amount)
            $("#nodays").val(selItem.noofdays)
            $("#totamount").val(selItem.totalamount)
            $("#ptarget").val(selItem.physicaltarget)
            $("#indicator").val(selItem.devtindicator)
            $("#amountTemp").val(selItem.totalamount)
            $("#isPPMPTag").val(selItem.isPPMP)
            $("#resperson").data("kendoComboBox").value(selItem.responsibleperson)
            $("#wfpid").val(selItem.wfpid)
            $("#nonofficeidparent_temp").val(selItem.nonofficeidparent)
            $("#description").val(selItem.description)
            $("#kpmid").val(selItem.kpmid)
            $("#fundreqid").val(selItem.fundreqid)
            $("#breakdownid").val(selItem.breakdownid)
            $("#fund").val(selItem.fund)
            $("#specid").val(selItem.specid)

            $("#activity_sub").data("kendoComboBox").dataSource.read();
            $("#activity_sub").data("kendoComboBox").value(selItem.specid)

            $("#groupactivity").data("kendoComboBox").value(selItem.subppaid)
            fnMainaccount()

            document.getElementById("btnSave").innerHTML = '<span class="fa fa-edit"></span> Update'
            $("#datepicker").val(selItem.completiondate)
            $("#1qtr").val(selItem.firstqtr)
            $("#2qtr").val(selItem.secondqtr)
            $("#3qtr").val(selItem.thirdqtr)
            $("#4qtr").val(selItem.fourthqtr)

            if (selItem.nonofficeidparent == 0)
            {
                $("#MainAppropriation").val("0.00")
                $("#SubAppropriation").val("0.00")
                $("#BalAppropriation").val("0.00")
            }

            if (selItem.subppaid != 0) {
                document.getElementById("includeppa").checked = true
                document.getElementById("includeppa").value = 1
            }
            else {
                document.getElementById("includeppa").checked = false
                document.getElementById("includeppa").value = 0
            }
            $("#mode").val(1)

            if (selItem.isPPMP == 1) { //ppmp
                $("#amount").attr("readonly", true)
                $("#itemname").attr("readonly", true)
                $("#unit").attr("readonly", true)
                if ($("#amount").val() == 0) {
                    $("#amount").attr("readonly", false)
                }
                else {
                    $("#amount").attr("readonly", true)
                }
            }
            else {
                $("#amount").attr("readonly", false)
                $("#itemname").attr("readonly", false)
            }
            //sync()
        }


        function reqClear() {

            $("#office").data("kendoComboBox").value("")
            $("#ooe").data("kendoComboBox").value("")
            $("#account").data("kendoComboBox").value("")
            $("#activity").data("kendoComboBox").value("")
            $("#specificactivity").val("")
            $("#itemname").val("")
            $("#description").val("")
            $("#unit").val("")
            $("#weight").val("")
            $("#jan").val(0)
            $("#feb").val(0)
            $("#mar").val(0)
            $("#apr").val(0)
            $("#may").val(0)
            $("#jun").val(0)
            $("#jul").val(0)
            $("#aug").val(0)
            $("#sep").val(0)
            $("#oct").val(0)
            $("#nov").val(0)
            $("#dec").val(0)
            $("#totqty").val(0)
            $("#amount").val(0.00)
            $("#nodays").val(1)
            $("#totamount").val(0.00)
            $("#ptarget").val("")
            $("#indicator").val("")
            $("#resperson").data("kendoComboBox").value("")
            $("#appropriation").val("0.00")
            $("#allotment").val("0.00")
            $("#appbalance").val("0.00")
            $("#appropriation_temp").val(0)
            $("#allotment_temp").val(0)
            $("#balance_temp").val(0)
            $("#WFPApprovedGrid").data("kendoGrid").dataSource.read()
            document.getElementById("btnSave").innerHTML = '<span class="fa fa-save"></span> Save'
            $("#wfpid").val(0)
            document.getElementById("includeppa").checked = false
            document.getElementById("includeppa").value = 0
            $("#mode").val(0)
            $("#ooeclass").data("kendoDropDownList").value("")
            $("#appropriation_whole").val("0.00")
            $("#reserve").val("0.00")
            $("#kpmid").val(0)
            $("#fundreqid").val(0)
            $("#breakdownid").val(0)
            $("#fund").val("")
            $("#review_tmp").val(0)
            $("#1qtr").val("")
            $("#2qtr").val("")
            $("#3qtr").val("")
            $("#4qtr").val("")
        }
        function reqClearPartial() {

            //$("#account").data("kendoComboBox").value("")
            $("#activity").data("kendoComboBox").value("")
            $("#specificactivity").val("")
            $("#itemname").val("")
            $("#description").val("")
            $("#unit").val("")
            $("#weight").val("")
            $("#jan").val(0)
            $("#feb").val(0)
            $("#mar").val(0)
            $("#apr").val(0)
            $("#may").val(0)
            $("#jun").val(0)
            $("#jul").val(0)
            $("#aug").val(0)
            $("#sep").val(0)
            $("#oct").val(0)
            $("#nov").val(0)
            $("#dec").val(0)
            $("#totqty").val(0)
            $("#amount").val(0.00)
            $("#nodays").val(1)
            $("#totamount").val(0.00)
            $("#ptarget").val("")
            $("#indicator").val("")
            $("#resperson").data("kendoComboBox").value("")
            $("#appropriation").val("0.00")
            $("#allotment").val("0.00")
            $("#appbalance").val("0.00")
            $("#appropriation_temp").val(0)
            $("#allotment_temp").val(0)
            $("#balance_temp").val(0)
            $("#WFPApprovedGrid").data("kendoGrid").dataSource.read()
            document.getElementById("btnSave").innerHTML = '<span class="fa fa-save"></span> Save'
            $("#wfpid").val(0)
            document.getElementById("includeppa").checked = false
            document.getElementById("includeppa").value = 0
            $("#mode").val(0)
            $("#1qtr").val("")
            $("#2qtr").val("")
            $("#3qtr").val("")
            $("#4qtr").val("")
        }

        function vwpPR_status() {

            loadwfp_disburse() // Load WFP-PR with disbursement status
            
        }

        function vwSubmitted() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfpsubmitted", "Report")";
            var office = $("#office").val();
            var program = $("#ooe").val()
            var account = $("#account").val()
            var tyear = $("#wfpyear").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var mode_trans = $("#gf_currentid").val()
            $.get(url,
                {
                    office: $("#office").val(),
                    program: program,
                    account: account,
                    tyear: tyear,
                    fundid: fundid,
                    mode_trans: mode_trans
                },
            function (d) {
                $('#wfpsubmitted').html(d);
            })

            $('#wfpsubmitted').data('kendoWindow').title("<i class='fa fa-navicon'> </i> Submitted WFP").center().open();
        }
        function vwApproved() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfpApproved", "Report")";
            var office = $("#office").val();
            var program = $("#ooe").val()
            var account = $("#account").val()
            var tyear = $("#wfpyear").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var mode_trans = $("#gf_currentid").val()
            $.get(url,
                {
                    office: $("#office").val(),
                    program: program,
                    account: account,
                    tyear: tyear,
                    fundid: fundid,
                    mode_trans: mode_trans
                },
            function (d) {
                $('#vwApproved').html(d);
            })

            $('#vwApproved').data('kendoWindow').title("<i class='fa fa-navicon'> </i> Reviewed WFP").center().open();
        }
        function vwApproved_lce() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfpApproved_lce", "Report")";
            var office = $("#office").val();
            var program = $("#ooe").val()
            var account = $("#account").val()
            var tyear = $("#wfpyear").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var mode_trans = $("#gf_currentid").val()
            $.get(url,
                {
                    office: $("#office").val(),
                    program: program,
                    account: account,
                    tyear: tyear,
                    fundid: fundid,
                    mode_trans: mode_trans
                },
            function (d) {
                $('#vwApproved_lce').html(d);
            })

            $('#vwApproved_lce').data('kendoWindow').title("<i class='fa fa-navicon'> </i> Approved WFP").center().open();
        }
        function wfpstatus() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfpstatus_review", "Report")";
            var office = $("#office").val();
            var program = $("#ooe").val()
            var account = $("#account").val()
            var tyear = $("#wfpyear").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            var mode_trans = $("#gf_currentid").val()
            $.get(url,
                {
                    office: $("#office").val(),
                    program: program,
                    account: account,
                    tyear: tyear,
                    fundid: fundid,
                    mode_trans: mode_trans
                },
            function (d) {
                $('#wfpstatus_review').html(d);
            })

            $('#wfpstatus_review').data('kendoWindow').title("<i class='fa fa-navicon'> </i> WFP Status").center().open();
        }
        function wfprevision() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfprevision", "Report")";
            var office = $("#office").val();
            var program = $("#ooe").val()
            var account = $("#account").val()
            var tyear = $("#wfpyear").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1
            $.get(url,
                {
                    office: $("#office").val(),
                    program: program,
                    account: account,
                    tyear: tyear,
                    fundid: fundid
                },
            function (d) {
                $('#wfprevision').html(d);
            })

            $('#wfprevision').data('kendoWindow').title("<i class='fa fa-navicon'> </i> Revised WFP").center().open();
        }
        function wfpritem() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfpritem", "Report")";
            var office = $("#office").val();
            var program = $("#ooe").val()
            var account = $("#account").val()
            var tyear = $("#wfpyear").val();
            var fundid = $("#gfid").val() == 1 ? 0 : 1

            if (office == 0 || office < 0 || office == "") {
                swal("Warning","Please select an office from the list below!","warning")
            }
            else {
                $.get(url,
                    {
                        office: $("#office").val(),
                        program: program,
                        account: account,
                        tyear: tyear,
                        fundid: fundid
                    },
                function (d) {
                    $('#wfpritem').html(d);
                })

                $('#wfpritem').data('kendoWindow').title("<i class='fa fa-navicon'> </i> PR ITEMS").center().open();
            }
        }

        function wfpdfppt() {
            $(window).scrollTop(0);
            var url = "@Url.Action("wfpdfppt", "Report")";
            var tyear = $("#wfpyear").val();

            $.get(url,
                {
                    tyear: tyear
                },
            function (d) {
                $('#wfpdfppt').html(d);
            })

            $('#wfpdfppt').data('kendoWindow').title("<i class='fa fa-navicon'> </i> WFP - DFPPT Review (PS/MOOE)").center().open();
          
        }
    </script>
    <div style="display:none">
        <input type="number" id="appropriation_temp" value="0" />
        <input type="number" id="allotment_temp" value="0" />
        <input type="number" id="balance_temp" vale="0" />
        <input id="mode" value="0" type="number" />
    </div>
    <style>
        .ChangeBackColor {
            background-color: #FFFF80;
        }
        .ChangeBackColorRPerson {
        background-color: #41f644;
        }
        .ChangeApprovedColor {
            background-color: #00ff21;
        }
        .ChangeSubppaColor {
        background-color:cyan;
        /*color:white;*/
        }
          .ChangeNotPPMPSubppaColor {
        background-color:lightgreen;
        }
        .k-dropdown-wrap.k-state-default {
            border-left-style: solid;
        }
        /*.k-scheduler-table td {
        border-width: 0 0 2px 1px; /* change borther width */
        /*border-color:red;*/
      /*}*/
        .k-grid tr td {
        border-bottom: 1px solid black;
        }
        .changesupplemental{
        background-color:orange;
        }
        .changesBackColorWithAD{
        background-color:lightblue;
    }
        .changesBackColorWithADPPMP{
        background-color:beige;
    }
    </style>
    @(Html.Kendo().Window()
        .Name("wfpsubmitted")
        //.Title("")
        .Width(810)
        .Height(565)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpsubmit"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
    )

    @(Html.Kendo().Window()
        .Name("vwApproved")
        //.Title("")
        .Width(810)
        .Height(640)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpapproved"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
    )

    @(Html.Kendo().Window()
        .Name("vwApproved_lce")
        //.Title("")
        .Width(810)
        .Height(590)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpapproved_lce"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
    )
@(Html.Kendo().Window()
        .Name("wfpstatus_review")
        //.Title("")
        .Width(810)
        .Height(750)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpstatus_review"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
)
@(Html.Kendo().Window()
        .Name("wfprevision")
        //.Title("")
        .Width(710)
        .Height(615)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpstatus_revision"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
)
@(Html.Kendo().Window()
        .Name("wfpritem")
        //.Title("")
        .Width(710)
        .Height(615)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpr"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
)

@(Html.Kendo().Window()
        .Name("wfpdfppt")
        //.Title("")
        .Width(800)
        .Height(750)
        .Visible(false)
        .Modal(true)
        .Draggable(true)
        .AutoFocus(true)
        .Events(e => e.Close("closewfpdfppt"))
        .Animation(a =>
        {
            a.Open(o => o.SlideIn(SlideDirection.Down));
            a.Close(c =>
            {
                c.SlideIn(SlideDirection.Down);
                c.Reverse(true);
            });
        })
                .Actions(a => { a.Close(); })
)


